{"ast":null,"code":"/**\n * 订阅套餐Tab页面\n * 显示用户当前订阅和可用套餐\n */import React,{useState,useEffect,useMemo}from'react';import{Card,CardBody,Button,Chip,Spinner,Modal,ModalContent,ModalHeader,ModalBody,ModalFooter,Divider,Tabs,Tab}from'@heroui/react';import{motion,AnimatePresence}from'framer-motion';import{Package,Star,Crown,AlertCircle,CheckCircle,QrCode,Zap,Gift,Calendar,Timer}from'lucide-react';import{packageUserApi,orderUserApi}from'../../../services/userApi';import QRCodeGenerator from'qrcode-generator';// 套餐分类类型\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const SubscriptionTab=()=>{const[packages,setPackages]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[selectedPackage,setSelectedPackage]=useState(null);const[orderInfo,setOrderInfo]=useState(null);const[orderLoading,setOrderLoading]=useState(false);const[paymentModal,setPaymentModal]=useState(false);const[paymentStatus,setPaymentStatus]=useState('pending');const[checkInterval,setCheckInterval]=useState(null);const[selectedCategory,setSelectedCategory]=useState('monthly');const[qrCodeExpired,setQrCodeExpired]=useState(false);const[qrCodeTimer,setQrCodeTimer]=useState(null);// 套餐分类配置\nconst subscriptionCategories=[{key:'weekly',label:'周订阅',icon:/*#__PURE__*/_jsx(Calendar,{size:18}),description:'7天体验',color:'secondary'},{key:'monthly',label:'月订阅',icon:/*#__PURE__*/_jsx(Package,{size:18}),description:'30天经济',color:'primary'},{key:'quarterly',label:'季订阅',icon:/*#__PURE__*/_jsx(Star,{size:18}),description:'90天优惠',color:'success'},{key:'yearly',label:'年订阅',icon:/*#__PURE__*/_jsx(Crown,{size:18}),description:'365天超值',color:'warning'},{key:'more',label:'更多',icon:/*#__PURE__*/_jsx(Gift,{size:18}),description:'其他时长',color:'danger'}];// 根据时长分类套餐\nconst categorizePackage=duration=>{if(duration===7)return'weekly';if(duration>=30&&duration<=31)return'monthly';if(duration>=90&&duration<=93)return'quarterly';if(duration>=364&&duration<=366)return'yearly';return'more';};// 分组套餐\nconst groupedPackages=useMemo(()=>{const groups={weekly:[],monthly:[],quarterly:[],yearly:[],more:[]};packages.forEach(pkg=>{const category=categorizePackage(pkg.duration);groups[category].push(pkg);});// 每个分组内按优先级排序\nObject.keys(groups).forEach(key=>{groups[key].sort((a,b)=>a.priority-b.priority);});return groups;},[packages]);// 可用的分类（有套餐的分类）\nconst availableCategories=useMemo(()=>{return subscriptionCategories.filter(category=>groupedPackages[category.key].length>0);},[groupedPackages]);// 获取套餐列表\nconst fetchPackages=async()=>{try{setLoading(true);setError('');const response=await packageUserApi.getPackages();if(response.code===20000){const sortedPackages=(response.data||[]).sort((a,b)=>a.priority-b.priority);setPackages(sortedPackages);// 设置默认选中的分类（第一个有套餐的分类）\nconst firstAvailableCategory=subscriptionCategories.find(category=>sortedPackages.some(pkg=>categorizePackage(pkg.duration)===category.key));if(firstAvailableCategory){setSelectedCategory(firstAvailableCategory.key);}}else{setError(response.msg||'获取套餐列表失败');}}catch(err){setError(err instanceof Error?err.message:'网络错误');}finally{setLoading(false);}};// 创建订单\nconst createOrder=async packageId=>{try{setOrderLoading(true);const response=await orderUserApi.createOrder(packageId);if(response.code===20000){setOrderInfo(response.data);setPaymentModal(true);setPaymentStatus('pending');setQrCodeExpired(false);startPaymentStatusCheck(response.data.order_id);startQrCodeTimer();}else{alert(response.msg||'创建订单失败');}}catch(err){alert(err instanceof Error?err.message:'网络错误');}finally{setOrderLoading(false);}};// 开始二维码计时器（5分钟）\nconst startQrCodeTimer=()=>{if(qrCodeTimer){clearTimeout(qrCodeTimer);}const timer=setTimeout(()=>{setQrCodeExpired(true);},5*60*1000);setQrCodeTimer(timer);};// 开始检查支付状态（1.5秒间隔）\nconst startPaymentStatusCheck=orderId=>{if(checkInterval){clearInterval(checkInterval);}const interval=setInterval(async()=>{try{const response=await orderUserApi.getPayStatus(orderId);if(response.code===20000){setPaymentStatus('success');clearInterval(interval);if(qrCodeTimer){clearTimeout(qrCodeTimer);}setTimeout(()=>{window.location.reload();},2000);}else if(response.code===20001){// 继续检查\n}else{setPaymentStatus('failed');clearInterval(interval);}}catch(err){console.error('检查支付状态失败:',err);}},1500);setCheckInterval(interval);};// 生成二维码\nconst generateQRCode=text=>{const qr=QRCodeGenerator(0,'M');qr.addData(text);qr.make();return qr.createDataURL(8,4);};// 获取套餐等级颜色\nconst getPackageLevelColor=level=>{switch(level.toLowerCase()){case'base':return'default';case'plus':return'primary';case'pro':case'premium':return'secondary';default:return'default';}};// 获取时长描述\nconst getDurationText=duration=>{if(duration===7)return'1周';if(duration>=30&&duration<=31)return'1个月';if(duration>=90&&duration<=93)return'1季度';if(duration>=364&&duration<=366)return'1年';return`${duration}天`;};// 关闭支付弹窗\nconst closePaymentModal=()=>{if(checkInterval){clearInterval(checkInterval);setCheckInterval(null);}if(qrCodeTimer){clearTimeout(qrCodeTimer);setQrCodeTimer(null);}setPaymentModal(false);setOrderInfo(null);setPaymentStatus('pending');setQrCodeExpired(false);};// 计算最受欢迎的套餐（中等价位）\nconst getMostPopularPackage=categoryPackages=>{if(categoryPackages.length<=1)return null;const sortedByPrice=[...categoryPackages].sort((a,b)=>a.price-b.price);const middleIndex=Math.floor(sortedByPrice.length/2);return sortedByPrice[middleIndex];};useEffect(()=>{fetchPackages();return()=>{if(checkInterval){clearInterval(checkInterval);}if(qrCodeTimer){clearTimeout(qrCodeTimer);}};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center space-y-2\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-default-900\",children:\"\\u8BA2\\u9605\\u5957\\u9910\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-default-500 max-w-md mx-auto\",children:\"\\u9009\\u62E9\\u9002\\u5408\\u60A8\\u7684\\u8BA2\\u9605\\u65B9\\u6848\\uFF0C\\u4EAB\\u53D7\\u4F18\\u8D28\\u670D\\u52A1\"})]}),loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-16 space-y-4\",children:[/*#__PURE__*/_jsx(Spinner,{size:\"lg\",color:\"primary\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-default-500\",children:\"\\u6B63\\u5728\\u52A0\\u8F7D\\u5957\\u9910\\u4FE1\\u606F...\"})]}),error&&/*#__PURE__*/_jsx(Card,{className:\"max-w-md mx-auto\",children:/*#__PURE__*/_jsxs(CardBody,{className:\"text-center p-8\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:48,className:\"text-danger mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-danger mb-2\",children:\"\\u52A0\\u8F7D\\u5931\\u8D25\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-default-600 text-sm mb-4\",children:error}),/*#__PURE__*/_jsx(Button,{color:\"danger\",variant:\"light\",onPress:fetchPackages,children:\"\\u91CD\\u65B0\\u52A0\\u8F7D\"})]})}),!loading&&!error&&availableCategories.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto\",children:/*#__PURE__*/_jsx(Tabs,{selectedKey:selectedCategory,onSelectionChange:key=>setSelectedCategory(key),variant:\"underlined\",color:\"primary\",size:\"lg\",classNames:{base:\"w-full\",tabList:\"gap-8 w-full relative rounded-none p-0\",cursor:\"w-full bg-gradient-to-r from-primary to-primary-400\",tab:\"max-w-fit px-4 h-14\",tabContent:\"group-data-[selected=true]:text-primary font-medium\"},children:availableCategories.map(category=>/*#__PURE__*/_jsx(Tab,{title:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center gap-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[category.icon,/*#__PURE__*/_jsx(\"span\",{children:category.label})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-default-400\",children:category.description}),/*#__PURE__*/_jsx(Chip,{size:\"sm\",variant:\"flat\",color:category.color,children:groupedPackages[category.key].length})]})]})},category.key))})}),!loading&&!error&&availableCategories.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"max-w-6xl mx-auto\",children:/*#__PURE__*/_jsx(AnimatePresence,{mode:\"wait\",children:/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:0.3},className:\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\",children:groupedPackages[selectedCategory].map((pkg,index)=>{const levelColor=getPackageLevelColor(pkg.level);const mostPopular=getMostPopularPackage(groupedPackages[selectedCategory]);const isPopular=(mostPopular===null||mostPopular===void 0?void 0:mostPopular.id)===pkg.id;return/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20,scale:0.95},animate:{opacity:1,y:0,scale:1},transition:{delay:index*0.1,duration:0.4,ease:\"easeOut\"},children:/*#__PURE__*/_jsxs(Card,{className:`relative h-full ${isPopular?'ring-2 ring-primary/50 shadow-xl border-primary/20':'hover:shadow-lg border-default-200'} transition-all duration-300 cursor-pointer group`,children:[isPopular&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-3 left-1/2 transform -translate-x-1/2 z-10\",children:/*#__PURE__*/_jsx(Chip,{color:\"primary\",size:\"sm\",startContent:/*#__PURE__*/_jsx(Zap,{size:14}),className:\"shadow-lg font-medium\",children:\"\\u6700\\u53D7\\u6B22\\u8FCE\"})}),/*#__PURE__*/_jsxs(CardBody,{className:\"p-6 text-center space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-default-900 leading-tight\",children:pkg.package_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center gap-2\",children:[/*#__PURE__*/_jsx(Chip,{size:\"sm\",color:levelColor,variant:\"flat\",children:pkg.level}),/*#__PURE__*/_jsx(Chip,{size:\"sm\",variant:\"bordered\",startContent:/*#__PURE__*/_jsx(Timer,{size:12}),children:getDurationText(pkg.duration)})]})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-baseline justify-center gap-1\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-4xl font-bold text-primary\",children:[\"\\xA5\",pkg.price]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-default-400\",children:[\"/ \",getDurationText(pkg.duration)]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-default-400\",children:[\"\\u7EA6 \\xA5\",(pkg.price/pkg.duration).toFixed(2),\" / \\u5929\"]})]}),pkg.remarks&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-default-50 p-4 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-default-600 leading-relaxed\",children:pkg.remarks})}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-2\",children:/*#__PURE__*/_jsx(Button,{fullWidth:true,size:\"lg\",color:isPopular?\"primary\":levelColor,variant:isPopular?\"solid\":\"bordered\",className:`font-semibold ${isPopular?'shadow-lg':''} group-hover:scale-105 transition-transform`,isLoading:orderLoading&&(selectedPackage===null||selectedPackage===void 0?void 0:selectedPackage.id)===pkg.id,isDisabled:pkg.status!==1,onPress:()=>{setSelectedPackage(pkg);createOrder(pkg.id);},children:pkg.status===1?'立刻订阅':'暂不可用'})})]})]})},pkg.id);})},selectedCategory)})}),!loading&&!error&&packages.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-16\",children:[/*#__PURE__*/_jsx(Package,{size:64,className:\"mx-auto mb-4 text-default-300\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-default-600 mb-2\",children:\"\\u6682\\u65E0\\u53EF\\u7528\\u5957\\u9910\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-default-400\",children:\"\\u8BF7\\u7A0D\\u540E\\u518D\\u8BD5\\u6216\\u8054\\u7CFB\\u5BA2\\u670D\"})]}),/*#__PURE__*/_jsx(Modal,{isOpen:paymentModal,onClose:closePaymentModal,size:\"lg\",hideCloseButton:paymentStatus==='success',classNames:{base:\"max-h-[90vh]\",body:\"py-6\"},children:/*#__PURE__*/_jsxs(ModalContent,{children:[/*#__PURE__*/_jsxs(ModalHeader,{className:\"flex flex-col gap-1\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold\",children:\"\\u5B8C\\u6210\\u652F\\u4ED8\"}),selectedPackage&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-default-500\",children:selectedPackage.package_name})]}),/*#__PURE__*/_jsx(ModalBody,{children:orderInfo&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardBody,{className:\"p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-default-500\",children:\"\\u8BA2\\u5355\\u53F7\"}),/*#__PURE__*/_jsx(\"code\",{className:\"text-xs bg-default-100 px-2 py-1 rounded\",children:orderInfo.order_id})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-default-500\",children:\"\\u652F\\u4ED8\\u91D1\\u989D\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-2xl font-bold text-primary\",children:[\"\\xA5\",selectedPackage===null||selectedPackage===void 0?void 0:selectedPackage.price]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-default-500\",children:\"\\u5957\\u9910\\u65F6\\u957F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedPackage?getDurationText(selectedPackage.duration):''})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[paymentStatus==='pending'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-3\",children:[/*#__PURE__*/_jsx(QrCode,{size:24,className:\"text-primary\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-medium\",children:orderInfo.pay_type==='wxpay'?'请使用微信扫码支付':'请扫码支付'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-default-500 space-y-1\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u4E8C\\u7EF4\\u78015\\u5206\\u949F\\u5185\\u6709\\u6548\"}),qrCodeExpired&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger font-medium\",children:\"\\u4E8C\\u7EF4\\u7801\\u5DF2\\u8FC7\\u671F\\uFF0C\\u8BF7\\u91CD\\u65B0\\u521B\\u5EFA\\u8BA2\\u5355\"})]})]}),paymentStatus==='checking'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(Spinner,{size:\"lg\",color:\"primary\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-default-600\",children:\"\\u6B63\\u5728\\u786E\\u8BA4\\u652F\\u4ED8\\u7ED3\\u679C...\"})]}),paymentStatus==='success'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(motion.div,{initial:{scale:0},animate:{scale:1},transition:{type:\"spring\",duration:0.6},children:/*#__PURE__*/_jsx(CheckCircle,{size:80,className:\"mx-auto text-success\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-success mb-2\",children:\"\\u652F\\u4ED8\\u6210\\u529F\\uFF01\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-default-500\",children:\"\\u9875\\u9762\\u5373\\u5C06\\u5237\\u65B0\\uFF0C\\u8BF7\\u7A0D\\u7B49...\"})]})]}),paymentStatus==='failed'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:48,className:\"mx-auto text-danger\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-danger mb-2\",children:\"\\u652F\\u4ED8\\u5931\\u8D25\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-default-500 text-sm\",children:\"\\u8BF7\\u91CD\\u8BD5\\u6216\\u8054\\u7CFB\\u5BA2\\u670D\"})]})]})]}),orderInfo.qr_code&&paymentStatus==='pending'&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsxs(Card,{className:\"p-6 relative\",children:[/*#__PURE__*/_jsx(motion.img,{src:generateQRCode(orderInfo.qr_code),alt:\"\\u652F\\u4ED8\\u4E8C\\u7EF4\\u7801\",className:`w-48 h-48 transition-all duration-500 ${qrCodeExpired?'filter grayscale opacity-30':''}`,initial:{opacity:0,scale:0.8},animate:{opacity:1,scale:1},transition:{delay:0.2}}),qrCodeExpired&&/*#__PURE__*/_jsx(motion.div,{className:\"absolute inset-0 flex items-center justify-center bg-black/20 rounded-lg\",initial:{opacity:0},animate:{opacity:1},transition:{duration:0.3},children:/*#__PURE__*/_jsx(Chip,{color:\"danger\",variant:\"solid\",className:\"shadow-lg\",children:\"\\u5DF2\\u8FC7\\u671F\"})})]})})]})}),/*#__PURE__*/_jsx(ModalFooter,{children:paymentStatus!=='success'&&/*#__PURE__*/_jsx(Button,{color:\"danger\",variant:\"light\",onPress:closePaymentModal,className:\"font-medium\",children:\"\\u53D6\\u6D88\\u652F\\u4ED8\"})})]})})]});};","map":{"version":3,"names":["React","useState","useEffect","useMemo","Card","CardBody","Button","Chip","Spinner","Modal","ModalContent","ModalHeader","ModalBody","ModalFooter","Divider","Tabs","Tab","motion","AnimatePresence","Package","Star","Crown","AlertCircle","CheckCircle","QrCode","Zap","Gift","Calendar","Timer","packageUserApi","orderUserApi","QRCodeGenerator","jsx","_jsx","jsxs","_jsxs","SubscriptionTab","packages","setPackages","loading","setLoading","error","setError","selectedPackage","setSelectedPackage","orderInfo","setOrderInfo","orderLoading","setOrderLoading","paymentModal","setPaymentModal","paymentStatus","setPaymentStatus","checkInterval","setCheckInterval","selectedCategory","setSelectedCategory","qrCodeExpired","setQrCodeExpired","qrCodeTimer","setQrCodeTimer","subscriptionCategories","key","label","icon","size","description","color","categorizePackage","duration","groupedPackages","groups","weekly","monthly","quarterly","yearly","more","forEach","pkg","category","push","Object","keys","sort","a","b","priority","availableCategories","filter","length","fetchPackages","response","getPackages","code","sortedPackages","data","firstAvailableCategory","find","some","msg","err","Error","message","createOrder","packageId","startPaymentStatusCheck","order_id","startQrCodeTimer","alert","clearTimeout","timer","setTimeout","orderId","clearInterval","interval","setInterval","getPayStatus","window","location","reload","console","generateQRCode","text","qr","addData","make","createDataURL","getPackageLevelColor","level","toLowerCase","getDurationText","closePaymentModal","getMostPopularPackage","categoryPackages","sortedByPrice","price","middleIndex","Math","floor","className","children","variant","onPress","selectedKey","onSelectionChange","classNames","base","tabList","cursor","tab","tabContent","map","title","mode","div","initial","opacity","y","animate","exit","transition","index","levelColor","mostPopular","isPopular","id","scale","delay","ease","startContent","package_name","toFixed","remarks","fullWidth","isLoading","isDisabled","status","isOpen","onClose","hideCloseButton","body","pay_type","type","qr_code","img","src","alt"],"sources":["/opt/dev/star_share/web/src/pages/user/tabs/SubscriptionTab.tsx"],"sourcesContent":["/**\n * 订阅套餐Tab页面\n * 显示用户当前订阅和可用套餐\n */\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { Card, CardBody, CardHeader, Button, Chip, Spinner, Modal, ModalContent, ModalHeader, ModalBody, ModalFooter, Divider, Tabs, Tab } from '@heroui/react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Package, Star, Crown, AlertCircle, CheckCircle, Clock, QrCode, Zap, Gift, Calendar, Timer } from 'lucide-react';\nimport { packageUserApi, orderUserApi } from '../../../services/userApi';\nimport QRCodeGenerator from 'qrcode-generator';\n\ninterface PackageInfo {\n  id: number;\n  package_name: string;\n  category: string;\n  price: number;\n  duration: number;\n  introduce: string;\n  level: string;\n  priority: number;\n  remarks: string;\n  status: number;\n}\n\ninterface OrderInfo {\n  success: boolean;\n  trade_no: string;\n  order_id: string;\n  payment_url: string | null;\n  qr_code: string;\n  channel: string;\n  pay_type: string;\n}\n\n// 套餐分类类型\ntype SubscriptionType = 'weekly' | 'monthly' | 'quarterly' | 'yearly' | 'more';\n\ninterface SubscriptionCategory {\n  key: SubscriptionType;\n  label: string;\n  icon: React.ReactNode;\n  description: string;\n  color: 'primary' | 'secondary' | 'success' | 'warning' | 'danger';\n}\n\nexport const SubscriptionTab: React.FC = () => {\n  const [packages, setPackages] = useState<PackageInfo[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string>('');\n  const [selectedPackage, setSelectedPackage] = useState<PackageInfo | null>(null);\n  const [orderInfo, setOrderInfo] = useState<OrderInfo | null>(null);\n  const [orderLoading, setOrderLoading] = useState(false);\n  const [paymentModal, setPaymentModal] = useState(false);\n  const [paymentStatus, setPaymentStatus] = useState<'pending' | 'checking' | 'success' | 'failed'>('pending');\n  const [checkInterval, setCheckInterval] = useState<NodeJS.Timeout | null>(null);\n  const [selectedCategory, setSelectedCategory] = useState<SubscriptionType>('monthly');\n  const [qrCodeExpired, setQrCodeExpired] = useState(false);\n  const [qrCodeTimer, setQrCodeTimer] = useState<NodeJS.Timeout | null>(null);\n\n  // 套餐分类配置\n  const subscriptionCategories: SubscriptionCategory[] = [\n    {\n      key: 'weekly',\n      label: '周订阅',\n      icon: <Calendar size={18} />,\n      description: '7天体验',\n      color: 'secondary'\n    },\n    {\n      key: 'monthly',\n      label: '月订阅',\n      icon: <Package size={18} />,\n      description: '30天经济',\n      color: 'primary'\n    },\n    {\n      key: 'quarterly',\n      label: '季订阅',\n      icon: <Star size={18} />,\n      description: '90天优惠',\n      color: 'success'\n    },\n    {\n      key: 'yearly',\n      label: '年订阅',\n      icon: <Crown size={18} />,\n      description: '365天超值',\n      color: 'warning'\n    },\n    {\n      key: 'more',\n      label: '更多',\n      icon: <Gift size={18} />,\n      description: '其他时长',\n      color: 'danger'\n    }\n  ];\n\n  // 根据时长分类套餐\n  const categorizePackage = (duration: number): SubscriptionType => {\n    if (duration === 7) return 'weekly';\n    if (duration >= 30 && duration <= 31) return 'monthly';\n    if (duration >= 90 && duration <= 93) return 'quarterly';\n    if (duration >= 364 && duration <= 366) return 'yearly';\n    return 'more';\n  };\n\n  // 分组套餐\n  const groupedPackages = useMemo(() => {\n    const groups: Record<SubscriptionType, PackageInfo[]> = {\n      weekly: [],\n      monthly: [],\n      quarterly: [],\n      yearly: [],\n      more: []\n    };\n\n    packages.forEach(pkg => {\n      const category = categorizePackage(pkg.duration);\n      groups[category].push(pkg);\n    });\n\n    // 每个分组内按优先级排序\n    Object.keys(groups).forEach(key => {\n      groups[key as SubscriptionType].sort((a, b) => a.priority - b.priority);\n    });\n\n    return groups;\n  }, [packages]);\n\n  // 可用的分类（有套餐的分类）\n  const availableCategories = useMemo(() => {\n    return subscriptionCategories.filter(category => \n      groupedPackages[category.key].length > 0\n    );\n  }, [groupedPackages]);\n\n  // 获取套餐列表\n  const fetchPackages = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const response = await packageUserApi.getPackages();\n      \n      if (response.code === 20000) {\n        const sortedPackages = (response.data || []).sort((a, b) => a.priority - b.priority);\n        setPackages(sortedPackages);\n        \n        // 设置默认选中的分类（第一个有套餐的分类）\n        const firstAvailableCategory = subscriptionCategories.find(category => \n          sortedPackages.some(pkg => categorizePackage(pkg.duration) === category.key)\n        );\n        if (firstAvailableCategory) {\n          setSelectedCategory(firstAvailableCategory.key);\n        }\n      } else {\n        setError(response.msg || '获取套餐列表失败');\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : '网络错误');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 创建订单\n  const createOrder = async (packageId: number) => {\n    try {\n      setOrderLoading(true);\n      const response = await orderUserApi.createOrder(packageId);\n      \n      if (response.code === 20000) {\n        setOrderInfo(response.data);\n        setPaymentModal(true);\n        setPaymentStatus('pending');\n        setQrCodeExpired(false);\n        startPaymentStatusCheck(response.data.order_id);\n        startQrCodeTimer();\n      } else {\n        alert(response.msg || '创建订单失败');\n      }\n    } catch (err) {\n      alert(err instanceof Error ? err.message : '网络错误');\n    } finally {\n      setOrderLoading(false);\n    }\n  };\n\n  // 开始二维码计时器（5分钟）\n  const startQrCodeTimer = () => {\n    if (qrCodeTimer) {\n      clearTimeout(qrCodeTimer);\n    }\n\n    const timer = setTimeout(() => {\n      setQrCodeExpired(true);\n    }, 5 * 60 * 1000);\n\n    setQrCodeTimer(timer);\n  };\n\n  // 开始检查支付状态（1.5秒间隔）\n  const startPaymentStatusCheck = (orderId: string) => {\n    if (checkInterval) {\n      clearInterval(checkInterval);\n    }\n\n    const interval = setInterval(async () => {\n      try {\n        const response = await orderUserApi.getPayStatus(orderId);\n        \n        if (response.code === 20000) {\n          setPaymentStatus('success');\n          clearInterval(interval);\n          if (qrCodeTimer) {\n            clearTimeout(qrCodeTimer);\n          }\n          setTimeout(() => {\n            window.location.reload();\n          }, 2000);\n        } else if (response.code === 20001) {\n          // 继续检查\n        } else {\n          setPaymentStatus('failed');\n          clearInterval(interval);\n        }\n      } catch (err) {\n        console.error('检查支付状态失败:', err);\n      }\n    }, 1500);\n\n    setCheckInterval(interval);\n  };\n\n  // 生成二维码\n  const generateQRCode = (text: string): string => {\n    const qr = QRCodeGenerator(0, 'M');\n    qr.addData(text);\n    qr.make();\n    return qr.createDataURL(8, 4);\n  };\n\n  // 获取套餐等级颜色\n  const getPackageLevelColor = (level: string): 'default' | 'primary' | 'secondary' | 'success' | 'warning' | 'danger' => {\n    switch (level.toLowerCase()) {\n      case 'base':\n        return 'default';\n      case 'plus':\n        return 'primary';\n      case 'pro':\n      case 'premium':\n        return 'secondary';\n      default:\n        return 'default';\n    }\n  };\n\n  // 获取时长描述\n  const getDurationText = (duration: number) => {\n    if (duration === 7) return '1周';\n    if (duration >= 30 && duration <= 31) return '1个月';\n    if (duration >= 90 && duration <= 93) return '1季度';\n    if (duration >= 364 && duration <= 366) return '1年';\n    return `${duration}天`;\n  };\n\n  // 关闭支付弹窗\n  const closePaymentModal = () => {\n    if (checkInterval) {\n      clearInterval(checkInterval);\n      setCheckInterval(null);\n    }\n    if (qrCodeTimer) {\n      clearTimeout(qrCodeTimer);\n      setQrCodeTimer(null);\n    }\n    setPaymentModal(false);\n    setOrderInfo(null);\n    setPaymentStatus('pending');\n    setQrCodeExpired(false);\n  };\n\n  // 计算最受欢迎的套餐（中等价位）\n  const getMostPopularPackage = (categoryPackages: PackageInfo[]) => {\n    if (categoryPackages.length <= 1) return null;\n    const sortedByPrice = [...categoryPackages].sort((a, b) => a.price - b.price);\n    const middleIndex = Math.floor(sortedByPrice.length / 2);\n    return sortedByPrice[middleIndex];\n  };\n\n  useEffect(() => {\n    fetchPackages();\n    \n    return () => {\n      if (checkInterval) {\n        clearInterval(checkInterval);\n      }\n      if (qrCodeTimer) {\n        clearTimeout(qrCodeTimer);\n      }\n    };\n  }, []);\n\n  return (\n    <div className=\"space-y-8\">\n      {/* 页面标题 */}\n      <div className=\"text-center space-y-2\">\n        <h1 className=\"text-3xl font-bold text-default-900\">订阅套餐</h1>\n        <p className=\"text-default-500 max-w-md mx-auto\">选择适合您的订阅方案，享受优质服务</p>\n      </div>\n\n      {/* 加载状态 */}\n      {loading && (\n        <div className=\"flex flex-col items-center justify-center py-16 space-y-4\">\n          <Spinner size=\"lg\" color=\"primary\" />\n          <p className=\"text-default-500\">正在加载套餐信息...</p>\n        </div>\n      )}\n\n      {/* 错误状态 */}\n      {error && (\n        <Card className=\"max-w-md mx-auto\">\n          <CardBody className=\"text-center p-8\">\n            <AlertCircle size={48} className=\"text-danger mx-auto mb-4\" />\n            <h3 className=\"text-lg font-semibold text-danger mb-2\">加载失败</h3>\n            <p className=\"text-default-600 text-sm mb-4\">{error}</p>\n            <Button color=\"danger\" variant=\"light\" onPress={fetchPackages}>\n              重新加载\n            </Button>\n          </CardBody>\n        </Card>\n      )}\n\n      {/* 分类标签页 */}\n      {!loading && !error && availableCategories.length > 0 && (\n        <div className=\"max-w-4xl mx-auto\">\n          <Tabs\n            selectedKey={selectedCategory}\n            onSelectionChange={(key) => setSelectedCategory(key as SubscriptionType)}\n            variant=\"underlined\"\n            color=\"primary\"\n            size=\"lg\"\n            classNames={{\n              base: \"w-full\",\n              tabList: \"gap-8 w-full relative rounded-none p-0\",\n              cursor: \"w-full bg-gradient-to-r from-primary to-primary-400\",\n              tab: \"max-w-fit px-4 h-14\",\n              tabContent: \"group-data-[selected=true]:text-primary font-medium\"\n            }}\n          >\n            {availableCategories.map((category) => (\n              <Tab\n                key={category.key}\n                title={\n                  <div className=\"flex flex-col items-center gap-1\">\n                    <div className=\"flex items-center gap-2\">\n                      {category.icon}\n                      <span>{category.label}</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-xs text-default-400\">{category.description}</span>\n                      <Chip size=\"sm\" variant=\"flat\" color={category.color}>\n                        {groupedPackages[category.key].length}\n                      </Chip>\n                    </div>\n                  </div>\n                }\n              />\n            ))}\n          </Tabs>\n        </div>\n      )}\n\n      {/* 套餐列表 */}\n      {!loading && !error && availableCategories.length > 0 && (\n        <div className=\"max-w-6xl mx-auto\">\n          <AnimatePresence mode=\"wait\">\n            <motion.div\n              key={selectedCategory}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              transition={{ duration: 0.3 }}\n              className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\"\n            >\n              {groupedPackages[selectedCategory].map((pkg, index) => {\n                const levelColor = getPackageLevelColor(pkg.level);\n                const mostPopular = getMostPopularPackage(groupedPackages[selectedCategory]);\n                const isPopular = mostPopular?.id === pkg.id;\n\n                return (\n                  <motion.div\n                    key={pkg.id}\n                    initial={{ opacity: 0, y: 20, scale: 0.95 }}\n                    animate={{ opacity: 1, y: 0, scale: 1 }}\n                    transition={{ \n                      delay: index * 0.1,\n                      duration: 0.4,\n                      ease: \"easeOut\"\n                    }}\n                  >\n                    <Card className={`relative h-full ${\n                      isPopular \n                        ? 'ring-2 ring-primary/50 shadow-xl border-primary/20' \n                        : 'hover:shadow-lg border-default-200'\n                    } transition-all duration-300 cursor-pointer group`}>\n                      \n                      {/* 推荐标签 */}\n                      {isPopular && (\n                        <div className=\"absolute -top-3 left-1/2 transform -translate-x-1/2 z-10\">\n                          <Chip\n                            color=\"primary\"\n                            size=\"sm\"\n                            startContent={<Zap size={14} />}\n                            className=\"shadow-lg font-medium\"\n                          >\n                            最受欢迎\n                          </Chip>\n                        </div>\n                      )}\n\n                      <CardBody className=\"p-6 text-center space-y-6\">\n                        \n                        {/* 套餐标题和等级 */}\n                        <div className=\"space-y-3\">\n                          <h3 className=\"text-xl font-bold text-default-900 leading-tight\">\n                            {pkg.package_name}\n                          </h3>\n                          <div className=\"flex justify-center gap-2\">\n                            <Chip size=\"sm\" color={levelColor} variant=\"flat\">\n                              {pkg.level}\n                            </Chip>\n                            <Chip size=\"sm\" variant=\"bordered\" startContent={<Timer size={12} />}>\n                              {getDurationText(pkg.duration)}\n                            </Chip>\n                          </div>\n                        </div>\n\n                        <Divider />\n\n                        {/* 价格信息 */}\n                        <div className=\"space-y-2\">\n                          <div className=\"flex items-baseline justify-center gap-1\">\n                            <span className=\"text-4xl font-bold text-primary\">¥{pkg.price}</span>\n                            <span className=\"text-default-400\">/ {getDurationText(pkg.duration)}</span>\n                          </div>\n                          <p className=\"text-sm text-default-400\">\n                            约 ¥{(pkg.price / pkg.duration).toFixed(2)} / 天\n                          </p>\n                        </div>\n\n                        {/* 套餐描述 */}\n                        {pkg.remarks && (\n                          <div className=\"bg-default-50 p-4 rounded-lg\">\n                            <p className=\"text-sm text-default-600 leading-relaxed\">\n                              {pkg.remarks}\n                            </p>\n                          </div>\n                        )}\n\n                        {/* 订阅按钮 */}\n                        <div className=\"pt-2\">\n                          <Button\n                            fullWidth\n                            size=\"lg\"\n                            color={isPopular ? \"primary\" : levelColor}\n                            variant={isPopular ? \"solid\" : \"bordered\"}\n                            className={`font-semibold ${isPopular ? 'shadow-lg' : ''} group-hover:scale-105 transition-transform`}\n                            isLoading={orderLoading && selectedPackage?.id === pkg.id}\n                            isDisabled={pkg.status !== 1}\n                            onPress={() => {\n                              setSelectedPackage(pkg);\n                              createOrder(pkg.id);\n                            }}\n                          >\n                            {pkg.status === 1 ? '立刻订阅' : '暂不可用'}\n                          </Button>\n                        </div>\n\n                      </CardBody>\n                    </Card>\n                  </motion.div>\n                );\n              })}\n            </motion.div>\n          </AnimatePresence>\n        </div>\n      )}\n\n      {/* 空状态 */}\n      {!loading && !error && packages.length === 0 && (\n        <div className=\"text-center py-16\">\n          <Package size={64} className=\"mx-auto mb-4 text-default-300\" />\n          <h3 className=\"text-xl font-semibold text-default-600 mb-2\">暂无可用套餐</h3>\n          <p className=\"text-default-400\">请稍后再试或联系客服</p>\n        </div>\n      )}\n\n      {/* 支付弹窗 */}\n      <Modal \n        isOpen={paymentModal} \n        onClose={closePaymentModal}\n        size=\"lg\"\n        hideCloseButton={paymentStatus === 'success'}\n        classNames={{\n          base: \"max-h-[90vh]\",\n          body: \"py-6\",\n        }}\n      >\n        <ModalContent>\n          <ModalHeader className=\"flex flex-col gap-1\">\n            <h2 className=\"text-xl font-bold\">完成支付</h2>\n            {selectedPackage && (\n              <p className=\"text-sm text-default-500\">{selectedPackage.package_name}</p>\n            )}\n          </ModalHeader>\n          \n          <ModalBody>\n            {orderInfo && (\n              <div className=\"space-y-6\">\n                \n                {/* 订单摘要 */}\n                <Card>\n                  <CardBody className=\"p-4\">\n                    <div className=\"space-y-3\">\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-default-500\">订单号</span>\n                        <code className=\"text-xs bg-default-100 px-2 py-1 rounded\">\n                          {orderInfo.order_id}\n                        </code>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-default-500\">支付金额</span>\n                        <span className=\"text-2xl font-bold text-primary\">¥{selectedPackage?.price}</span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-default-500\">套餐时长</span>\n                        <span className=\"font-medium\">\n                          {selectedPackage ? getDurationText(selectedPackage.duration) : ''}\n                        </span>\n                      </div>\n                    </div>\n                  </CardBody>\n                </Card>\n\n                {/* 支付状态 */}\n                <div className=\"text-center\">\n                  {paymentStatus === 'pending' && (\n                    <div className=\"space-y-4\">\n                      <div className=\"flex items-center justify-center gap-3\">\n                        <QrCode size={24} className=\"text-primary\" />\n                        <span className=\"text-lg font-medium\">\n                          {orderInfo.pay_type === 'wxpay' ? '请使用微信扫码支付' : '请扫码支付'}\n                        </span>\n                      </div>\n                      <div className=\"text-sm text-default-500 space-y-1\">\n                        <p>二维码5分钟内有效</p>\n                        {qrCodeExpired && (\n                          <p className=\"text-danger font-medium\">二维码已过期，请重新创建订单</p>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                  \n                  {paymentStatus === 'checking' && (\n                    <div className=\"space-y-4\">\n                      <Spinner size=\"lg\" color=\"primary\" />\n                      <p className=\"text-default-600\">正在确认支付结果...</p>\n                    </div>\n                  )}\n                  \n                  {paymentStatus === 'success' && (\n                    <div className=\"space-y-6\">\n                      <motion.div\n                        initial={{ scale: 0 }}\n                        animate={{ scale: 1 }}\n                        transition={{ type: \"spring\", duration: 0.6 }}\n                      >\n                        <CheckCircle size={80} className=\"mx-auto text-success\" />\n                      </motion.div>\n                      <div>\n                        <h3 className=\"text-2xl font-bold text-success mb-2\">支付成功！</h3>\n                        <p className=\"text-default-500\">页面即将刷新，请稍等...</p>\n                      </div>\n                    </div>\n                  )}\n                  \n                  {paymentStatus === 'failed' && (\n                    <div className=\"space-y-4\">\n                      <AlertCircle size={48} className=\"mx-auto text-danger\" />\n                      <div>\n                        <h3 className=\"text-lg font-semibold text-danger mb-2\">支付失败</h3>\n                        <p className=\"text-default-500 text-sm\">请重试或联系客服</p>\n                      </div>\n                    </div>\n                  )}\n                </div>\n\n                {/* 二维码 */}\n                {orderInfo.qr_code && paymentStatus === 'pending' && (\n                  <div className=\"flex justify-center\">\n                    <Card className=\"p-6 relative\">\n                      <motion.img \n                        src={generateQRCode(orderInfo.qr_code)} \n                        alt=\"支付二维码\"\n                        className={`w-48 h-48 transition-all duration-500 ${\n                          qrCodeExpired ? 'filter grayscale opacity-30' : ''\n                        }`}\n                        initial={{ opacity: 0, scale: 0.8 }}\n                        animate={{ opacity: 1, scale: 1 }}\n                        transition={{ delay: 0.2 }}\n                      />\n                      {qrCodeExpired && (\n                        <motion.div \n                          className=\"absolute inset-0 flex items-center justify-center bg-black/20 rounded-lg\"\n                          initial={{ opacity: 0 }}\n                          animate={{ opacity: 1 }}\n                          transition={{ duration: 0.3 }}\n                        >\n                          <Chip color=\"danger\" variant=\"solid\" className=\"shadow-lg\">\n                            已过期\n                          </Chip>\n                        </motion.div>\n                      )}\n                    </Card>\n                  </div>\n                )}\n              </div>\n            )}\n          </ModalBody>\n          \n          <ModalFooter>\n            {paymentStatus !== 'success' && (\n              <Button \n                color=\"danger\" \n                variant=\"light\" \n                onPress={closePaymentModal}\n                className=\"font-medium\"\n              >\n                取消支付\n              </Button>\n            )}\n          </ModalFooter>\n        </ModalContent>\n      </Modal>\n    </div>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Card,CardBody,Button,Modal,ModalContent,ModalHeader,ModalBody,ModalFooter,Input,Textarea,Select,SelectItem,Chip,useDisclosure,Table,TableHeader,TableColumn,TableBody,TableRow,TableCell,Pagination,Spinner}from'@heroui/react';import{Plus,Edit,Trash2,RefreshCw,Key,Copy,Calendar,User,Package,CheckCircle,XCircle,Clock}from'lucide-react';import{cdkApi}from'../../services/api';import{motion}from'framer-motion';import{showMessage}from'../../utils/toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminCDK=()=>{const[data,setData]=useState([]);const[loading,setLoading]=useState(false);const[editingRecord,setEditingRecord]=useState(null);const[currentPage,setCurrentPage]=useState(1);const[pageSize]=useState(10);const{isOpen,onOpen,onOpenChange}=useDisclosure();// 表单数据\nconst[formData,setFormData]=useState({code:'',package_id:'1',status:'1',expires_at:'',remarks:''});// 加载数据\nconst loadData=async()=>{setLoading(true);try{const result=await cdkApi.list({page:1,limit:100});setData(Array.isArray(result.data)?result.data:[]);}catch(error){showMessage.error(error.message||'加载数据失败');setData([]);}finally{setLoading(false);}};useEffect(()=>{loadData();},[]);// 生成随机CDK码\nconst generateCode=()=>{const chars='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';let result='';for(let i=0;i<16;i++){if(i>0&&i%4===0)result+='-';result+=chars.charAt(Math.floor(Math.random()*chars.length));}return result;};// 新增CDK\nconst handleAdd=()=>{setEditingRecord(null);const tomorrow=new Date();tomorrow.setDate(tomorrow.getDate()+30);setFormData({code:generateCode(),package_id:'1',status:'1',expires_at:tomorrow.toISOString().split('T')[0],remarks:''});onOpen();};// 编辑CDK\nconst handleEdit=record=>{setEditingRecord(record);setFormData({code:record.code,package_id:String(record.package_id),status:String(record.status),expires_at:record.expires_at?record.expires_at.split('T')[0]:'',remarks:record.remarks||''});onOpen();};// 删除CDK\nconst handleDelete=async(id,code)=>{if(!window.confirm(`确定删除CDK \"${code}\" 吗？`))return;try{await cdkApi.delete(id);showMessage.success('删除成功');loadData();}catch(error){showMessage.error(error.message||'删除失败');}};// 保存CDK\nconst handleSave=async()=>{try{if(editingRecord){await cdkApi.update({id:editingRecord.id,...formData});showMessage.success('更新成功');}else{await cdkApi.create(formData);showMessage.success('创建成功');}onOpenChange();loadData();}catch(error){showMessage.error(error.message||'保存失败');}};// 复制CDK码\nconst handleCopy=code=>{navigator.clipboard.writeText(code);showMessage.success('CDK码已复制到剪贴板');};// 计算统计数据\nconst stats={total:data.length,unused:data.filter(cdk=>cdk.status===1&&!cdk.used_at).length,used:data.filter(cdk=>cdk.used_at).length,expired:data.filter(cdk=>{if(!cdk.expires_at)return false;const now=new Date();const expiry=new Date(cdk.expires_at);return expiry<now;}).length};// 分页数据\nconst startIndex=(currentPage-1)*pageSize;const endIndex=startIndex+pageSize;const paginatedData=data.slice(startIndex,endIndex);const totalPages=Math.ceil(data.length/pageSize);const columns=[{name:\"CDK码\",uid:\"code\",sortable:true},{name:\"套餐信息\",uid:\"package_info\",sortable:true},{name:\"状态\",uid:\"status\",sortable:true},{name:\"使用信息\",uid:\"usage\",sortable:true},{name:\"过期时间\",uid:\"expires_at\",sortable:true},{name:\"操作\",uid:\"actions\"}];const renderCell=(cdk,columnKey)=>{switch(columnKey){case\"code\":return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"code\",{className:\"bg-gray-100 px-2 py-1 rounded text-sm font-mono\",children:cdk.code}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"light\",isIconOnly:true,onPress:()=>handleCopy(cdk.code),children:/*#__PURE__*/_jsx(Copy,{className:\"w-4 h-4\"})})]});case\"package_info\":return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-1 rounded bg-blue-100 text-blue-600\",children:/*#__PURE__*/_jsx(Package,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:cdk.package_name||`套餐${cdk.package_id}`}),cdk.price&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"\\xA5\",cdk.price]})]})]});case\"status\":if(cdk.used_at){return/*#__PURE__*/_jsx(Chip,{size:\"sm\",color:\"success\",variant:\"flat\",startContent:/*#__PURE__*/_jsx(CheckCircle,{className:\"w-3 h-3\"}),children:\"\\u5DF2\\u4F7F\\u7528\"});}if(cdk.expires_at&&new Date(cdk.expires_at)<new Date()){return/*#__PURE__*/_jsx(Chip,{size:\"sm\",color:\"danger\",variant:\"flat\",startContent:/*#__PURE__*/_jsx(Clock,{className:\"w-3 h-3\"}),children:\"\\u5DF2\\u8FC7\\u671F\"});}return/*#__PURE__*/_jsx(Chip,{size:\"sm\",color:\"primary\",variant:\"flat\",startContent:/*#__PURE__*/_jsx(Key,{className:\"w-3 h-3\"}),children:\"\\u672A\\u4F7F\\u7528\"});case\"usage\":return cdk.used_at?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(User,{className:\"w-3 h-3 text-gray-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:cdk.used_by_username||`用户${cdk.used_by}`})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:new Date(cdk.used_at).toLocaleDateString()})]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:\"\\u672A\\u4F7F\\u7528\"});case\"expires_at\":return cdk.expires_at?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-3 h-3 text-gray-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-600\",children:new Date(cdk.expires_at).toLocaleDateString()})]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:\"\\u6C38\\u4E0D\\u8FC7\\u671F\"});case\"actions\":return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"light\",color:\"primary\",onPress:()=>handleEdit(cdk),startContent:/*#__PURE__*/_jsx(Edit,{className:\"w-4 h-4\"}),children:\"\\u7F16\\u8F91\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"light\",color:\"danger\",onPress:()=>handleDelete(cdk.id,cdk.code),startContent:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"}),children:\"\\u5220\\u9664\"})]});default:return cdk[columnKey];}};return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.3},className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent\",children:\"CDK\\u7BA1\\u7406\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:\"\\u7BA1\\u7406\\u5151\\u6362\\u7801\\u7684\\u751F\\u6210\\u3001\\u5206\\u53D1\\u548C\\u4F7F\\u7528\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Button,{variant:\"flat\",startContent:/*#__PURE__*/_jsx(RefreshCw,{className:\"w-4 h-4\"}),onPress:loadData,isLoading:loading,children:\"\\u5237\\u65B0\\u6570\\u636E\"}),/*#__PURE__*/_jsx(Button,{color:\"primary\",variant:\"shadow\",startContent:/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"}),onPress:handleAdd,className:\"bg-gradient-to-r from-blue-500 to-purple-600\",children:\"\\u751F\\u6210CDK\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsx(Card,{className:\"bg-gradient-to-br from-blue-50 to-blue-100 border-0\",children:/*#__PURE__*/_jsx(CardBody,{className:\"p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded-lg bg-blue-500 text-white\",children:/*#__PURE__*/_jsx(Key,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"\\u603BCDK\\u6570\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stats.total})]})]})})}),/*#__PURE__*/_jsx(Card,{className:\"bg-gradient-to-br from-green-50 to-green-100 border-0\",children:/*#__PURE__*/_jsx(CardBody,{className:\"p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded-lg bg-green-500 text-white\",children:/*#__PURE__*/_jsx(CheckCircle,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"\\u672A\\u4F7F\\u7528\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stats.unused})]})]})})}),/*#__PURE__*/_jsx(Card,{className:\"bg-gradient-to-br from-amber-50 to-amber-100 border-0\",children:/*#__PURE__*/_jsx(CardBody,{className:\"p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded-lg bg-amber-500 text-white\",children:/*#__PURE__*/_jsx(User,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"\\u5DF2\\u4F7F\\u7528\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stats.used})]})]})})}),/*#__PURE__*/_jsx(Card,{className:\"bg-gradient-to-br from-red-50 to-red-100 border-0\",children:/*#__PURE__*/_jsx(CardBody,{className:\"p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded-lg bg-red-500 text-white\",children:/*#__PURE__*/_jsx(XCircle,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"\\u5DF2\\u8FC7\\u671F\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stats.expired})]})]})})})]}),/*#__PURE__*/_jsx(Card,{className:\"border-0 shadow-lg\",children:/*#__PURE__*/_jsxs(Table,{\"aria-label\":\"CDK\\u6570\\u636E\\u8868\\u683C\",isHeaderSticky:true,classNames:{wrapper:\"max-h-[600px]\"},bottomContent:totalPages>1?/*#__PURE__*/_jsx(\"div\",{className:\"flex w-full justify-center\",children:/*#__PURE__*/_jsx(Pagination,{isCompact:true,showControls:true,showShadow:true,color:\"primary\",page:currentPage,total:totalPages,onChange:setCurrentPage})}):null,children:[/*#__PURE__*/_jsx(TableHeader,{columns:columns,children:column=>/*#__PURE__*/_jsx(TableColumn,{allowsSorting:column.sortable,children:column.name},column.uid)}),/*#__PURE__*/_jsx(TableBody,{items:paginatedData,loadingContent:/*#__PURE__*/_jsx(Spinner,{}),isLoading:loading,emptyContent:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(Key,{className:\"w-12 h-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u6682\\u65E0CDK\\u6570\\u636E\"})]}),children:item=>/*#__PURE__*/_jsx(TableRow,{children:columnKey=>/*#__PURE__*/_jsx(TableCell,{children:renderCell(item,columnKey)})},item.id)})]})}),/*#__PURE__*/_jsx(Modal,{isOpen:isOpen,onOpenChange:onOpenChange,size:\"2xl\",children:/*#__PURE__*/_jsx(ModalContent,{children:onClose=>/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ModalHeader,{className:\"flex flex-col gap-1\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold\",children:editingRecord?'编辑CDK':'生成CDK'})}),/*#__PURE__*/_jsx(ModalBody,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(Input,{label:\"CDK\\u7801\",placeholder:\"CDK\\u7801\",value:formData.code,onChange:e=>setFormData({...formData,code:e.target.value}),isRequired:true,variant:\"bordered\",className:\"flex-1\"}),/*#__PURE__*/_jsx(Button,{variant:\"flat\",onPress:()=>setFormData({...formData,code:generateCode()}),children:\"\\u91CD\\u65B0\\u751F\\u6210\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(Select,{label:\"\\u5173\\u8054\\u5957\\u9910\",selectedKeys:[formData.package_id],onSelectionChange:keys=>{const value=Array.from(keys)[0];setFormData({...formData,package_id:value});},variant:\"bordered\",children:[/*#__PURE__*/_jsx(SelectItem,{children:\"\\u57FA\\u7840\\u5957\\u9910\"},\"1\"),/*#__PURE__*/_jsx(SelectItem,{children:\"\\u6807\\u51C6\\u5957\\u9910\"},\"2\"),/*#__PURE__*/_jsx(SelectItem,{children:\"\\u9AD8\\u7EA7\\u5957\\u9910\"},\"3\")]}),/*#__PURE__*/_jsxs(Select,{label:\"\\u72B6\\u6001\",selectedKeys:[formData.status],onSelectionChange:keys=>{const value=Array.from(keys)[0];setFormData({...formData,status:value});},variant:\"bordered\",children:[/*#__PURE__*/_jsx(SelectItem,{children:\"\\u542F\\u7528\"},\"1\"),/*#__PURE__*/_jsx(SelectItem,{children:\"\\u7981\\u7528\"},\"0\")]})]}),/*#__PURE__*/_jsx(Input,{label:\"\\u8FC7\\u671F\\u65F6\\u95F4\",type:\"date\",value:formData.expires_at,onChange:e=>setFormData({...formData,expires_at:e.target.value}),variant:\"bordered\"}),/*#__PURE__*/_jsx(Textarea,{label:\"\\u5907\\u6CE8\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5907\\u6CE8\\u4FE1\\u606F...\",value:formData.remarks,onChange:e=>setFormData({...formData,remarks:e.target.value}),variant:\"bordered\"})]})}),/*#__PURE__*/_jsxs(ModalFooter,{children:[/*#__PURE__*/_jsx(Button,{variant:\"flat\",onPress:onClose,children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(Button,{color:\"primary\",onPress:handleSave,className:\"bg-gradient-to-r from-blue-500 to-purple-600\",children:\"\\u4FDD\\u5B58\"})]})]})})})]});};export default AdminCDK;","map":{"version":3,"names":["React","useState","useEffect","Card","CardBody","Button","Modal","ModalContent","ModalHeader","ModalBody","ModalFooter","Input","Textarea","Select","SelectItem","Chip","useDisclosure","Table","TableHeader","TableColumn","TableBody","TableRow","TableCell","Pagination","Spinner","Plus","Edit","Trash2","RefreshCw","Key","Copy","Calendar","User","Package","CheckCircle","XCircle","Clock","cdkApi","motion","showMessage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminCDK","data","setData","loading","setLoading","editingRecord","setEditingRecord","currentPage","setCurrentPage","pageSize","isOpen","onOpen","onOpenChange","formData","setFormData","code","package_id","status","expires_at","remarks","loadData","result","list","page","limit","Array","isArray","error","message","generateCode","chars","i","charAt","Math","floor","random","length","handleAdd","tomorrow","Date","setDate","getDate","toISOString","split","handleEdit","record","String","handleDelete","id","window","confirm","delete","success","handleSave","update","create","handleCopy","navigator","clipboard","writeText","stats","total","unused","filter","cdk","used_at","used","expired","now","expiry","startIndex","endIndex","paginatedData","slice","totalPages","ceil","columns","name","uid","sortable","renderCell","columnKey","className","children","size","variant","isIconOnly","onPress","package_name","price","color","startContent","used_by_username","used_by","toLocaleDateString","div","initial","opacity","y","animate","transition","duration","isLoading","isHeaderSticky","classNames","wrapper","bottomContent","isCompact","showControls","showShadow","onChange","column","allowsSorting","items","loadingContent","emptyContent","item","onClose","label","placeholder","value","e","target","isRequired","selectedKeys","onSelectionChange","keys","from","type"],"sources":["/opt/dev/star_share/web/src/pages/admin/AdminCDK.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Card, \n  CardBody,\n  Button, \n  Modal, \n  ModalContent, \n  ModalHeader, \n  ModalBody, \n  ModalFooter,\n  Input,\n  Textarea,\n  Select,\n  SelectItem,\n  Chip,\n  useDisclosure,\n  Table,\n  TableHeader,\n  TableColumn,\n  TableBody,\n  TableRow,\n  TableCell,\n  Pagination,\n  Spinner\n} from '@heroui/react';\nimport { \n  Plus, \n  Edit, \n  Trash2, \n  RefreshCw, \n  Key, \n  Copy,\n  Calendar,\n  User,\n  Package,\n  CheckCircle,\n  XCircle,\n  Clock\n} from 'lucide-react';\nimport { cdkApi } from '../../services/api';\nimport { motion } from 'framer-motion';\nimport { showMessage } from '../../utils/toast';\n\ninterface CDK {\n  id: number;\n  code: string;\n  package_id: number;\n  package_name?: string;\n  category?: string;\n  price?: number;\n  duration?: number;\n  status: number;\n  used_by?: number;\n  used_by_username?: string;\n  used_at?: string;\n  created_at?: string;\n  expires_at?: string;\n  remarks?: string;\n}\n\nconst AdminCDK: React.FC = () => {\n  const [data, setData] = useState<CDK[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [editingRecord, setEditingRecord] = useState<CDK | null>(null);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pageSize] = useState(10);\n  const { isOpen, onOpen, onOpenChange } = useDisclosure();\n\n  // 表单数据\n  const [formData, setFormData] = useState({\n    code: '',\n    package_id: '1',\n    status: '1',\n    expires_at: '',\n    remarks: ''\n  });\n\n  // 加载数据\n  const loadData = async () => {\n    setLoading(true);\n    try {\n      const result = await cdkApi.list({\n        page: 1,\n        limit: 100,\n      });\n      \n      setData(Array.isArray(result.data) ? result.data : []);\n    } catch (error: any) {\n      showMessage.error(error.message || '加载数据失败');\n      setData([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  // 生成随机CDK码\n  const generateCode = () => {\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n    let result = '';\n    for (let i = 0; i < 16; i++) {\n      if (i > 0 && i % 4 === 0) result += '-';\n      result += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return result;\n  };\n\n  // 新增CDK\n  const handleAdd = () => {\n    setEditingRecord(null);\n    const tomorrow = new Date();\n    tomorrow.setDate(tomorrow.getDate() + 30);\n    \n    setFormData({\n      code: generateCode(),\n      package_id: '1',\n      status: '1',\n      expires_at: tomorrow.toISOString().split('T')[0],\n      remarks: ''\n    });\n    onOpen();\n  };\n\n  // 编辑CDK\n  const handleEdit = (record: CDK) => {\n    setEditingRecord(record);\n    setFormData({\n      code: record.code,\n      package_id: String(record.package_id),\n      status: String(record.status),\n      expires_at: record.expires_at ? record.expires_at.split('T')[0] : '',\n      remarks: record.remarks || ''\n    });\n    onOpen();\n  };\n\n  // 删除CDK\n  const handleDelete = async (id: number, code: string) => {\n    if (!window.confirm(`确定删除CDK \"${code}\" 吗？`)) return;\n    \n    try {\n      await cdkApi.delete(id);\n      showMessage.success('删除成功');\n      loadData();\n    } catch (error: any) {\n      showMessage.error(error.message || '删除失败');\n    }\n  };\n\n  // 保存CDK\n  const handleSave = async () => {\n    try {\n      if (editingRecord) {\n        await cdkApi.update({ id: editingRecord.id, ...formData });\n        showMessage.success('更新成功');\n      } else {\n        await cdkApi.create(formData);\n        showMessage.success('创建成功');\n      }\n      \n      onOpenChange();\n      loadData();\n    } catch (error: any) {\n      showMessage.error(error.message || '保存失败');\n    }\n  };\n\n  // 复制CDK码\n  const handleCopy = (code: string) => {\n    navigator.clipboard.writeText(code);\n    showMessage.success('CDK码已复制到剪贴板');\n  };\n\n  // 计算统计数据\n  const stats = {\n    total: data.length,\n    unused: data.filter(cdk => cdk.status === 1 && !cdk.used_at).length,\n    used: data.filter(cdk => cdk.used_at).length,\n    expired: data.filter(cdk => {\n      if (!cdk.expires_at) return false;\n      const now = new Date();\n      const expiry = new Date(cdk.expires_at);\n      return expiry < now;\n    }).length\n  };\n\n  // 分页数据\n  const startIndex = (currentPage - 1) * pageSize;\n  const endIndex = startIndex + pageSize;\n  const paginatedData = data.slice(startIndex, endIndex);\n  const totalPages = Math.ceil(data.length / pageSize);\n\n  const columns = [\n    { name: \"CDK码\", uid: \"code\", sortable: true },\n    { name: \"套餐信息\", uid: \"package_info\", sortable: true },\n    { name: \"状态\", uid: \"status\", sortable: true },\n    { name: \"使用信息\", uid: \"usage\", sortable: true },\n    { name: \"过期时间\", uid: \"expires_at\", sortable: true },\n    { name: \"操作\", uid: \"actions\" }\n  ];\n\n  const renderCell = (cdk: CDK, columnKey: React.Key) => {\n    switch (columnKey) {\n      case \"code\":\n        return (\n          <div className=\"flex items-center gap-2\">\n            <code className=\"bg-gray-100 px-2 py-1 rounded text-sm font-mono\">\n              {cdk.code}\n            </code>\n            <Button\n              size=\"sm\"\n              variant=\"light\"\n              isIconOnly\n              onPress={() => handleCopy(cdk.code)}\n            >\n              <Copy className=\"w-4 h-4\" />\n            </Button>\n          </div>\n        );\n      case \"package_info\":\n        return (\n          <div className=\"flex items-center gap-2\">\n            <div className=\"p-1 rounded bg-blue-100 text-blue-600\">\n              <Package className=\"w-4 h-4\" />\n            </div>\n            <div>\n              <p className=\"text-sm font-medium\">{cdk.package_name || `套餐${cdk.package_id}`}</p>\n              {cdk.price && (\n                <p className=\"text-xs text-gray-500\">¥{cdk.price}</p>\n              )}\n            </div>\n          </div>\n        );\n      case \"status\":\n        if (cdk.used_at) {\n          return <Chip size=\"sm\" color=\"success\" variant=\"flat\" startContent={<CheckCircle className=\"w-3 h-3\" />}>已使用</Chip>;\n        }\n        if (cdk.expires_at && new Date(cdk.expires_at) < new Date()) {\n          return <Chip size=\"sm\" color=\"danger\" variant=\"flat\" startContent={<Clock className=\"w-3 h-3\" />}>已过期</Chip>;\n        }\n        return <Chip size=\"sm\" color=\"primary\" variant=\"flat\" startContent={<Key className=\"w-3 h-3\" />}>未使用</Chip>;\n      case \"usage\":\n        return cdk.used_at ? (\n          <div className=\"flex flex-col gap-1\">\n            <div className=\"flex items-center gap-1\">\n              <User className=\"w-3 h-3 text-gray-400\" />\n              <span className=\"text-xs\">{cdk.used_by_username || `用户${cdk.used_by}`}</span>\n            </div>\n            <span className=\"text-xs text-gray-500\">\n              {new Date(cdk.used_at).toLocaleDateString()}\n            </span>\n          </div>\n        ) : (\n          <span className=\"text-xs text-gray-500\">未使用</span>\n        );\n      case \"expires_at\":\n        return cdk.expires_at ? (\n          <div className=\"flex items-center gap-1\">\n            <Calendar className=\"w-3 h-3 text-gray-400\" />\n            <span className=\"text-xs text-gray-600\">\n              {new Date(cdk.expires_at).toLocaleDateString()}\n            </span>\n          </div>\n        ) : (\n          <span className=\"text-xs text-gray-500\">永不过期</span>\n        );\n      case \"actions\":\n        return (\n          <div className=\"flex items-center gap-2\">\n            <Button\n              size=\"sm\"\n              variant=\"light\"\n              color=\"primary\"\n              onPress={() => handleEdit(cdk)}\n              startContent={<Edit className=\"w-4 h-4\" />}\n            >\n              编辑\n            </Button>\n            <Button\n              size=\"sm\"\n              variant=\"light\"\n              color=\"danger\"\n              onPress={() => handleDelete(cdk.id, cdk.code)}\n              startContent={<Trash2 className=\"w-4 h-4\" />}\n            >\n              删除\n            </Button>\n          </div>\n        );\n      default:\n        return cdk[columnKey as keyof CDK];\n    }\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.3 }}\n      className=\"space-y-6\"\n    >\n      {/* 页面标题 */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent\">\n            CDK管理\n          </h1>\n          <p className=\"text-gray-600 mt-1\">管理兑换码的生成、分发和使用</p>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <Button\n            variant=\"flat\"\n            startContent={<RefreshCw className=\"w-4 h-4\" />}\n            onPress={loadData}\n            isLoading={loading}\n          >\n            刷新数据\n          </Button>\n          <Button\n            color=\"primary\"\n            variant=\"shadow\"\n            startContent={<Plus className=\"w-4 h-4\" />}\n            onPress={handleAdd}\n            className=\"bg-gradient-to-r from-blue-500 to-purple-600\"\n          >\n            生成CDK\n          </Button>\n        </div>\n      </div>\n\n      {/* 统计卡片 */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <Card className=\"bg-gradient-to-br from-blue-50 to-blue-100 border-0\">\n          <CardBody className=\"p-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 rounded-lg bg-blue-500 text-white\">\n                <Key className=\"w-5 h-5\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600\">总CDK数</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats.total}</p>\n              </div>\n            </div>\n          </CardBody>\n        </Card>\n        <Card className=\"bg-gradient-to-br from-green-50 to-green-100 border-0\">\n          <CardBody className=\"p-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 rounded-lg bg-green-500 text-white\">\n                <CheckCircle className=\"w-5 h-5\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600\">未使用</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats.unused}</p>\n              </div>\n            </div>\n          </CardBody>\n        </Card>\n        <Card className=\"bg-gradient-to-br from-amber-50 to-amber-100 border-0\">\n          <CardBody className=\"p-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 rounded-lg bg-amber-500 text-white\">\n                <User className=\"w-5 h-5\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600\">已使用</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats.used}</p>\n              </div>\n            </div>\n          </CardBody>\n        </Card>\n        <Card className=\"bg-gradient-to-br from-red-50 to-red-100 border-0\">\n          <CardBody className=\"p-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 rounded-lg bg-red-500 text-white\">\n                <XCircle className=\"w-5 h-5\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600\">已过期</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats.expired}</p>\n              </div>\n            </div>\n          </CardBody>\n        </Card>\n      </div>\n\n      {/* 数据表格 */}\n      <Card className=\"border-0 shadow-lg\">\n        <Table\n          aria-label=\"CDK数据表格\"\n          isHeaderSticky\n          classNames={{\n            wrapper: \"max-h-[600px]\",\n          }}\n          bottomContent={\n            totalPages > 1 ? (\n              <div className=\"flex w-full justify-center\">\n                <Pagination\n                  isCompact\n                  showControls\n                  showShadow\n                  color=\"primary\"\n                  page={currentPage}\n                  total={totalPages}\n                  onChange={setCurrentPage}\n                />\n              </div>\n            ) : null\n          }\n        >\n          <TableHeader columns={columns}>\n            {(column) => (\n              <TableColumn key={column.uid} allowsSorting={column.sortable}>\n                {column.name}\n              </TableColumn>\n            )}\n          </TableHeader>\n          <TableBody\n            items={paginatedData}\n            loadingContent={<Spinner />}\n            isLoading={loading}\n            emptyContent={\n              <div className=\"text-center py-8\">\n                <Key className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <p className=\"text-gray-500\">暂无CDK数据</p>\n              </div>\n            }\n          >\n            {(item) => (\n              <TableRow key={item.id}>\n                {(columnKey) => <TableCell>{renderCell(item, columnKey)}</TableCell>}\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </Card>\n\n      {/* 编辑/新增模态框 */}\n      <Modal isOpen={isOpen} onOpenChange={onOpenChange} size=\"2xl\">\n        <ModalContent>\n          {(onClose) => (\n            <>\n              <ModalHeader className=\"flex flex-col gap-1\">\n                <h3 className=\"text-xl font-bold\">\n                  {editingRecord ? '编辑CDK' : '生成CDK'}\n                </h3>\n              </ModalHeader>\n              <ModalBody>\n                <div className=\"space-y-4\">\n                  <div className=\"flex gap-2\">\n                    <Input\n                      label=\"CDK码\"\n                      placeholder=\"CDK码\"\n                      value={formData.code}\n                      onChange={(e) => setFormData({...formData, code: e.target.value})}\n                      isRequired\n                      variant=\"bordered\"\n                      className=\"flex-1\"\n                    />\n                    <Button\n                      variant=\"flat\"\n                      onPress={() => setFormData({...formData, code: generateCode()})}\n                    >\n                      重新生成\n                    </Button>\n                  </div>\n                  \n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <Select\n                      label=\"关联套餐\"\n                      selectedKeys={[formData.package_id]}\n                      onSelectionChange={(keys) => {\n                        const value = Array.from(keys)[0] as string;\n                        setFormData({...formData, package_id: value});\n                      }}\n                      variant=\"bordered\"\n                    >\n                      <SelectItem key=\"1\">基础套餐</SelectItem>\n                      <SelectItem key=\"2\">标准套餐</SelectItem>\n                      <SelectItem key=\"3\">高级套餐</SelectItem>\n                    </Select>\n                    \n                    <Select\n                      label=\"状态\"\n                      selectedKeys={[formData.status]}\n                      onSelectionChange={(keys) => {\n                        const value = Array.from(keys)[0] as string;\n                        setFormData({...formData, status: value});\n                      }}\n                      variant=\"bordered\"\n                    >\n                      <SelectItem key=\"1\">启用</SelectItem>\n                      <SelectItem key=\"0\">禁用</SelectItem>\n                    </Select>\n                  </div>\n                  \n                  <Input\n                    label=\"过期时间\"\n                    type=\"date\"\n                    value={formData.expires_at}\n                    onChange={(e) => setFormData({...formData, expires_at: e.target.value})}\n                    variant=\"bordered\"\n                  />\n                  \n                  <Textarea\n                    label=\"备注\"\n                    placeholder=\"请输入备注信息...\"\n                    value={formData.remarks}\n                    onChange={(e) => setFormData({...formData, remarks: e.target.value})}\n                    variant=\"bordered\"\n                  />\n                </div>\n              </ModalBody>\n              <ModalFooter>\n                <Button variant=\"flat\" onPress={onClose}>\n                  取消\n                </Button>\n                <Button \n                  color=\"primary\" \n                  onPress={handleSave}\n                  className=\"bg-gradient-to-r from-blue-500 to-purple-600\"\n                >\n                  保存\n                </Button>\n              </ModalFooter>\n            </>\n          )}\n        </ModalContent>\n      </Modal>\n    </motion.div>\n  );\n};\n\nexport default AdminCDK;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
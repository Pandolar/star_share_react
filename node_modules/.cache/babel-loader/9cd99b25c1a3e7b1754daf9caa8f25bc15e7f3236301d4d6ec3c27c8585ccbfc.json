{"ast":null,"code":"// src/index.ts\nimport { isElementInChildOfActiveScope } from \"@react-aria/focus\";\nimport { useFocusWithin, useInteractOutside } from \"@react-aria/interactions\";\nimport { useEffect } from \"react\";\nvar visibleOverlays = [];\nfunction useAriaOverlay(props, ref) {\n  const {\n    disableOutsideEvents = true,\n    isDismissable = false,\n    isKeyboardDismissDisabled = false,\n    isOpen,\n    onClose,\n    shouldCloseOnBlur,\n    shouldCloseOnInteractOutside\n  } = props;\n  useEffect(() => {\n    if (isOpen) {\n      visibleOverlays.push(ref);\n    }\n    return () => {\n      const index = visibleOverlays.indexOf(ref);\n      if (index >= 0) {\n        visibleOverlays.splice(index, 1);\n      }\n    };\n  }, [isOpen, ref]);\n  const onHide = () => {\n    if (visibleOverlays[visibleOverlays.length - 1] === ref && onClose) {\n      onClose();\n    }\n  };\n  const onInteractOutsideStart = e => {\n    if (!shouldCloseOnInteractOutside || shouldCloseOnInteractOutside(e.target)) {\n      if (visibleOverlays[visibleOverlays.length - 1] === ref) {\n        if (disableOutsideEvents) {\n          e.stopPropagation();\n          e.preventDefault();\n        }\n      }\n      if (e.pointerType !== \"touch\") {\n        onHide();\n      }\n    }\n  };\n  const onInteractOutside = e => {\n    if (e.pointerType !== \"touch\") {\n      return;\n    }\n    if (!shouldCloseOnInteractOutside || shouldCloseOnInteractOutside(e.target)) {\n      if (visibleOverlays[visibleOverlays.length - 1] === ref) {\n        if (disableOutsideEvents) {\n          e.stopPropagation();\n          e.preventDefault();\n        }\n      }\n      onHide();\n    }\n  };\n  const onKeyDown = e => {\n    if (e.key === \"Escape\" && !isKeyboardDismissDisabled && !e.nativeEvent.isComposing) {\n      e.stopPropagation();\n      e.preventDefault();\n      onHide();\n    }\n  };\n  useInteractOutside({\n    isDisabled: !(isDismissable && isOpen),\n    onInteractOutside: isDismissable && isOpen ? onInteractOutside : void 0,\n    onInteractOutsideStart,\n    ref\n  });\n  const {\n    focusWithinProps\n  } = useFocusWithin({\n    isDisabled: !shouldCloseOnBlur,\n    onBlurWithin: e => {\n      if (!e.relatedTarget || isElementInChildOfActiveScope(e.relatedTarget)) {\n        return;\n      }\n      if (!shouldCloseOnInteractOutside || shouldCloseOnInteractOutside(e.relatedTarget)) {\n        onHide();\n      }\n    }\n  });\n  const onPointerDownUnderlay = e => {\n    if (e.target === e.currentTarget) {\n      e.preventDefault();\n    }\n  };\n  return {\n    overlayProps: {\n      onKeyDown,\n      ...focusWithinProps\n    },\n    underlayProps: {\n      onPointerDown: onPointerDownUnderlay\n    }\n  };\n}\nexport { useAriaOverlay };","map":{"version":3,"names":["isElementInChildOfActiveScope","useFocusWithin","useInteractOutside","useEffect","visibleOverlays","useAriaOverlay","props","ref","disableOutsideEvents","isDismissable","isKeyboardDismissDisabled","isOpen","onClose","shouldCloseOnBlur","shouldCloseOnInteractOutside","push","index","indexOf","splice","onHide","length","onInteractOutsideStart","e","target","stopPropagation","preventDefault","pointerType","onInteractOutside","onKeyDown","key","nativeEvent","isComposing","isDisabled","focusWithinProps","onBlurWithin","relatedTarget","onPointerDownUnderlay","currentTarget","overlayProps","underlayProps","onPointerDown"],"sources":["/opt/dev/star_share/web/node_modules/.pnpm/@heroui+use-aria-overlay@2.0.1_react-dom@19.1.0_react@19.1.0/node_modules/@heroui/use-aria-overlay/dist/index.mjs"],"sourcesContent":["// src/index.ts\nimport { isElementInChildOfActiveScope } from \"@react-aria/focus\";\nimport { useFocusWithin, useInteractOutside } from \"@react-aria/interactions\";\nimport { useEffect } from \"react\";\nvar visibleOverlays = [];\nfunction useAriaOverlay(props, ref) {\n  const {\n    disableOutsideEvents = true,\n    isDismissable = false,\n    isKeyboardDismissDisabled = false,\n    isOpen,\n    onClose,\n    shouldCloseOnBlur,\n    shouldCloseOnInteractOutside\n  } = props;\n  useEffect(() => {\n    if (isOpen) {\n      visibleOverlays.push(ref);\n    }\n    return () => {\n      const index = visibleOverlays.indexOf(ref);\n      if (index >= 0) {\n        visibleOverlays.splice(index, 1);\n      }\n    };\n  }, [isOpen, ref]);\n  const onHide = () => {\n    if (visibleOverlays[visibleOverlays.length - 1] === ref && onClose) {\n      onClose();\n    }\n  };\n  const onInteractOutsideStart = (e) => {\n    if (!shouldCloseOnInteractOutside || shouldCloseOnInteractOutside(e.target)) {\n      if (visibleOverlays[visibleOverlays.length - 1] === ref) {\n        if (disableOutsideEvents) {\n          e.stopPropagation();\n          e.preventDefault();\n        }\n      }\n      if (e.pointerType !== \"touch\") {\n        onHide();\n      }\n    }\n  };\n  const onInteractOutside = (e) => {\n    if (e.pointerType !== \"touch\") {\n      return;\n    }\n    if (!shouldCloseOnInteractOutside || shouldCloseOnInteractOutside(e.target)) {\n      if (visibleOverlays[visibleOverlays.length - 1] === ref) {\n        if (disableOutsideEvents) {\n          e.stopPropagation();\n          e.preventDefault();\n        }\n      }\n      onHide();\n    }\n  };\n  const onKeyDown = (e) => {\n    if (e.key === \"Escape\" && !isKeyboardDismissDisabled && !e.nativeEvent.isComposing) {\n      e.stopPropagation();\n      e.preventDefault();\n      onHide();\n    }\n  };\n  useInteractOutside({\n    isDisabled: !(isDismissable && isOpen),\n    onInteractOutside: isDismissable && isOpen ? onInteractOutside : void 0,\n    onInteractOutsideStart,\n    ref\n  });\n  const { focusWithinProps } = useFocusWithin({\n    isDisabled: !shouldCloseOnBlur,\n    onBlurWithin: (e) => {\n      if (!e.relatedTarget || isElementInChildOfActiveScope(e.relatedTarget)) {\n        return;\n      }\n      if (!shouldCloseOnInteractOutside || shouldCloseOnInteractOutside(e.relatedTarget)) {\n        onHide();\n      }\n    }\n  });\n  const onPointerDownUnderlay = (e) => {\n    if (e.target === e.currentTarget) {\n      e.preventDefault();\n    }\n  };\n  return {\n    overlayProps: {\n      onKeyDown,\n      ...focusWithinProps\n    },\n    underlayProps: {\n      onPointerDown: onPointerDownUnderlay\n    }\n  };\n}\nexport {\n  useAriaOverlay\n};\n"],"mappings":"AAAA;AACA,SAASA,6BAA6B,QAAQ,mBAAmB;AACjE,SAASC,cAAc,EAAEC,kBAAkB,QAAQ,0BAA0B;AAC7E,SAASC,SAAS,QAAQ,OAAO;AACjC,IAAIC,eAAe,GAAG,EAAE;AACxB,SAASC,cAAcA,CAACC,KAAK,EAAEC,GAAG,EAAE;EAClC,MAAM;IACJC,oBAAoB,GAAG,IAAI;IAC3BC,aAAa,GAAG,KAAK;IACrBC,yBAAyB,GAAG,KAAK;IACjCC,MAAM;IACNC,OAAO;IACPC,iBAAiB;IACjBC;EACF,CAAC,GAAGR,KAAK;EACTH,SAAS,CAAC,MAAM;IACd,IAAIQ,MAAM,EAAE;MACVP,eAAe,CAACW,IAAI,CAACR,GAAG,CAAC;IAC3B;IACA,OAAO,MAAM;MACX,MAAMS,KAAK,GAAGZ,eAAe,CAACa,OAAO,CAACV,GAAG,CAAC;MAC1C,IAAIS,KAAK,IAAI,CAAC,EAAE;QACdZ,eAAe,CAACc,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;MAClC;IACF,CAAC;EACH,CAAC,EAAE,CAACL,MAAM,EAAEJ,GAAG,CAAC,CAAC;EACjB,MAAMY,MAAM,GAAGA,CAAA,KAAM;IACnB,IAAIf,eAAe,CAACA,eAAe,CAACgB,MAAM,GAAG,CAAC,CAAC,KAAKb,GAAG,IAAIK,OAAO,EAAE;MAClEA,OAAO,CAAC,CAAC;IACX;EACF,CAAC;EACD,MAAMS,sBAAsB,GAAIC,CAAC,IAAK;IACpC,IAAI,CAACR,4BAA4B,IAAIA,4BAA4B,CAACQ,CAAC,CAACC,MAAM,CAAC,EAAE;MAC3E,IAAInB,eAAe,CAACA,eAAe,CAACgB,MAAM,GAAG,CAAC,CAAC,KAAKb,GAAG,EAAE;QACvD,IAAIC,oBAAoB,EAAE;UACxBc,CAAC,CAACE,eAAe,CAAC,CAAC;UACnBF,CAAC,CAACG,cAAc,CAAC,CAAC;QACpB;MACF;MACA,IAAIH,CAAC,CAACI,WAAW,KAAK,OAAO,EAAE;QAC7BP,MAAM,CAAC,CAAC;MACV;IACF;EACF,CAAC;EACD,MAAMQ,iBAAiB,GAAIL,CAAC,IAAK;IAC/B,IAAIA,CAAC,CAACI,WAAW,KAAK,OAAO,EAAE;MAC7B;IACF;IACA,IAAI,CAACZ,4BAA4B,IAAIA,4BAA4B,CAACQ,CAAC,CAACC,MAAM,CAAC,EAAE;MAC3E,IAAInB,eAAe,CAACA,eAAe,CAACgB,MAAM,GAAG,CAAC,CAAC,KAAKb,GAAG,EAAE;QACvD,IAAIC,oBAAoB,EAAE;UACxBc,CAAC,CAACE,eAAe,CAAC,CAAC;UACnBF,CAAC,CAACG,cAAc,CAAC,CAAC;QACpB;MACF;MACAN,MAAM,CAAC,CAAC;IACV;EACF,CAAC;EACD,MAAMS,SAAS,GAAIN,CAAC,IAAK;IACvB,IAAIA,CAAC,CAACO,GAAG,KAAK,QAAQ,IAAI,CAACnB,yBAAyB,IAAI,CAACY,CAAC,CAACQ,WAAW,CAACC,WAAW,EAAE;MAClFT,CAAC,CAACE,eAAe,CAAC,CAAC;MACnBF,CAAC,CAACG,cAAc,CAAC,CAAC;MAClBN,MAAM,CAAC,CAAC;IACV;EACF,CAAC;EACDjB,kBAAkB,CAAC;IACjB8B,UAAU,EAAE,EAAEvB,aAAa,IAAIE,MAAM,CAAC;IACtCgB,iBAAiB,EAAElB,aAAa,IAAIE,MAAM,GAAGgB,iBAAiB,GAAG,KAAK,CAAC;IACvEN,sBAAsB;IACtBd;EACF,CAAC,CAAC;EACF,MAAM;IAAE0B;EAAiB,CAAC,GAAGhC,cAAc,CAAC;IAC1C+B,UAAU,EAAE,CAACnB,iBAAiB;IAC9BqB,YAAY,EAAGZ,CAAC,IAAK;MACnB,IAAI,CAACA,CAAC,CAACa,aAAa,IAAInC,6BAA6B,CAACsB,CAAC,CAACa,aAAa,CAAC,EAAE;QACtE;MACF;MACA,IAAI,CAACrB,4BAA4B,IAAIA,4BAA4B,CAACQ,CAAC,CAACa,aAAa,CAAC,EAAE;QAClFhB,MAAM,CAAC,CAAC;MACV;IACF;EACF,CAAC,CAAC;EACF,MAAMiB,qBAAqB,GAAId,CAAC,IAAK;IACnC,IAAIA,CAAC,CAACC,MAAM,KAAKD,CAAC,CAACe,aAAa,EAAE;MAChCf,CAAC,CAACG,cAAc,CAAC,CAAC;IACpB;EACF,CAAC;EACD,OAAO;IACLa,YAAY,EAAE;MACZV,SAAS;MACT,GAAGK;IACL,CAAC;IACDM,aAAa,EAAE;MACbC,aAAa,EAAEJ;IACjB;EACF,CAAC;AACH;AACA,SACE/B,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"/**\n * 订阅套餐Tab页面\n * 显示用户当前订阅和可用套餐\n */import React,{useState,useEffect,useMemo}from'react';import{Card,CardBody,Button,Chip,Spinner,Modal,ModalContent,ModalHeader,ModalBody,ModalFooter,Divider,Tab,Tabs}from'@heroui/react';import{motion,AnimatePresence}from'framer-motion';import{Package,Star,Crown,AlertCircle,CheckCircle,QrCode,Zap,Calendar,Timer}from'lucide-react';import{packageUserApi,orderUserApi}from'../../../services/userApi';import QRCodeGenerator from'qrcode-generator';import'./SubscriptionTab.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const SubscriptionTab=()=>{const[packages,setPackages]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[selectedPackage,setSelectedPackage]=useState(null);const[orderInfo,setOrderInfo]=useState(null);const[orderLoading,setOrderLoading]=useState(false);const[paymentModal,setPaymentModal]=useState(false);const[paymentStatus,setPaymentStatus]=useState('pending');const[checkInterval,setCheckInterval]=useState(null);const[selectedCategory,setSelectedCategory]=useState('monthly');const[qrCodeExpired,setQrCodeExpired]=useState(false);const[qrCodeTimer,setQrCodeTimer]=useState(null);// 套餐分类配置\nconst subscriptionCategories=[{key:'weekly',label:'周订阅',icon:/*#__PURE__*/_jsx(Calendar,{className:\"w-6 h-6\"}),description:'7天体验'},{key:'monthly',label:'月订阅',icon:/*#__PURE__*/_jsx(Package,{className:\"w-6 h-6\"}),description:'30天经济'},{key:'quarterly',label:'季订阅',icon:/*#__PURE__*/_jsx(Star,{className:\"w-6 h-6\"}),description:'90天优惠'},{key:'yearly',label:'年订阅',icon:/*#__PURE__*/_jsx(Crown,{className:\"w-6 h-6\"}),description:'365天超值'},{key:'more',label:'更多',icon:/*#__PURE__*/_jsx(Timer,{className:\"w-6 h-6\"}),description:'其他时长'}];// 根据时长分类套餐\nconst categorizePackage=duration=>{if(duration===7)return'weekly';if(duration>=30&&duration<=31)return'monthly';if(duration>=90&&duration<=93)return'quarterly';if(duration>=364&&duration<=366)return'yearly';return'more';};// 分组套餐\nconst groupedPackages=useMemo(()=>{const groups={weekly:[],monthly:[],quarterly:[],yearly:[],more:[]};packages.forEach(pkg=>{const category=categorizePackage(pkg.duration);groups[category].push(pkg);});Object.keys(groups).forEach(key=>{groups[key].sort((a,b)=>a.priority-b.priority);});return groups;},[packages]);// 可用的分类\nconst availableCategories=useMemo(()=>{return subscriptionCategories.filter(category=>groupedPackages[category.key].length>0);},[groupedPackages]);// 计算日均价格（保留2位小数）\nconst calculateDailyPrice=(price,duration)=>{if(duration<=0)return'0.00';const dailyPrice=price/duration;return dailyPrice.toFixed(2);};// 获取套餐列表\nconst fetchPackages=async()=>{try{setLoading(true);setError('');const response=await packageUserApi.getPackages();if(response.code===20000){const sortedPackages=(response.data||[]).sort((a,b)=>a.priority-b.priority);setPackages(sortedPackages);const firstAvailableCategory=subscriptionCategories.find(category=>sortedPackages.some(pkg=>categorizePackage(pkg.duration)===category.key));if(firstAvailableCategory){setSelectedCategory(firstAvailableCategory.key);}}else{setError(response.msg||'获取套餐列表失败');}}catch(err){setError(err instanceof Error?err.message:'网络错误');}finally{setLoading(false);}};// 创建订单\nconst createOrder=async packageId=>{try{setOrderLoading(true);const response=await orderUserApi.createOrder(packageId);if(response.code===20000){setOrderInfo(response.data);setPaymentModal(true);setPaymentStatus('pending');setQrCodeExpired(false);startPaymentStatusCheck(response.data.order_id);startQrCodeTimer();}else{alert(response.msg||'创建订单失败');}}catch(err){alert(err instanceof Error?err.message:'网络错误');}finally{setOrderLoading(false);}};// 开始二维码计时器\nconst startQrCodeTimer=()=>{if(qrCodeTimer){clearTimeout(qrCodeTimer);}const timer=setTimeout(()=>{setQrCodeExpired(true);},5*60*1000);setQrCodeTimer(timer);};// 开始检查支付状态\nconst startPaymentStatusCheck=orderId=>{if(checkInterval){clearInterval(checkInterval);}const interval=setInterval(async()=>{try{const response=await orderUserApi.getPayStatus(orderId);if(response.code===20000){setPaymentStatus('success');clearInterval(interval);if(qrCodeTimer){clearTimeout(qrCodeTimer);}setTimeout(()=>{window.location.reload();},2000);}else if(response.code===20001){// 继续检查\n}else{setPaymentStatus('failed');clearInterval(interval);}}catch(err){console.error('检查支付状态失败:',err);}},1500);setCheckInterval(interval);};// 生成二维码\nconst generateQRCode=text=>{const qr=QRCodeGenerator(0,'M');qr.addData(text);qr.make();return qr.createDataURL(8,4);};// 获取时长描述\nconst getDurationText=duration=>{if(duration===7)return'1周';if(duration>=30&&duration<=31)return'1个月';if(duration>=90&&duration<=93)return'1季度';if(duration>=364&&duration<=366)return'1年';return`${duration}天`;};// 关闭支付弹窗\nconst closePaymentModal=()=>{if(checkInterval){clearInterval(checkInterval);setCheckInterval(null);}if(qrCodeTimer){clearTimeout(qrCodeTimer);setQrCodeTimer(null);}setPaymentModal(false);setOrderInfo(null);setPaymentStatus('pending');setQrCodeExpired(false);};// 计算最受欢迎的套餐\nconst getMostPopularPackage=categoryPackages=>{if(categoryPackages.length<=1)return null;const sortedByPrice=[...categoryPackages].sort((a,b)=>a.price-b.price);const middleIndex=Math.floor(sortedByPrice.length/2);return sortedByPrice[middleIndex];};useEffect(()=>{fetchPackages();return()=>{if(checkInterval){clearInterval(checkInterval);}if(qrCodeTimer){clearTimeout(qrCodeTimer);}};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full\",id:\"subscription-tab-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-foreground mb-2\",children:\"\\u8BA2\\u9605\\u5957\\u9910\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-default-500 max-w-md mx-auto\",children:\"\\u9009\\u62E9\\u9002\\u5408\\u60A8\\u7684\\u8BA2\\u9605\\u65B9\\u6848\\uFF0C\\u4EAB\\u53D7\\u4F18\\u8D28\\u670D\\u52A1\"})]}),loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-16\",children:[/*#__PURE__*/_jsx(Spinner,{size:\"lg\",color:\"primary\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-default-500 mt-4\",children:\"\\u6B63\\u5728\\u52A0\\u8F7D\\u5957\\u9910\\u4FE1\\u606F...\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"max-w-md mx-auto\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardBody,{className:\"text-center p-8\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-12 h-12 text-danger mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-danger mb-2\",children:\"\\u52A0\\u8F7D\\u5931\\u8D25\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-default-600 text-sm mb-4\",children:error}),/*#__PURE__*/_jsx(Button,{color:\"danger\",variant:\"light\",onPress:fetchPackages,children:\"\\u91CD\\u65B0\\u52A0\\u8F7D\"})]})})}),!loading&&!error&&availableCategories.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsx(Tabs,{selectedKey:selectedCategory,onSelectionChange:key=>setSelectedCategory(key),variant:\"underlined\",color:\"primary\",classNames:{base:\"w-full\",tabList:\"gap-6 w-full relative rounded-none p-0 border-b border-divider\",cursor:\"w-full bg-primary\",tab:\"max-w-fit px-3 h-16\",tabContent:\"group-data-[selected=true]:text-primary\"},children:availableCategories.map(category=>/*#__PURE__*/_jsx(Tab,{title:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 py-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 text-primary\",children:category.icon}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-start\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-base\",children:category.label}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-default-500\",children:category.description}),/*#__PURE__*/_jsx(Chip,{size:\"sm\",variant:\"flat\",color:\"primary\",className:\"h-5 text-xs px-1.5\",children:groupedPackages[category.key].length})]})]})]})},category.key))})}),!loading&&!error&&availableCategories.length>0&&/*#__PURE__*/_jsx(AnimatePresence,{mode:\"wait\",children:/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:0.3},className:\"grid gap-6 md:grid-cols-2 lg:grid-cols-3 max-w-6xl mx-auto\",children:groupedPackages[selectedCategory].map((pkg,index)=>{const mostPopular=getMostPopularPackage(groupedPackages[selectedCategory]);const isPopular=(mostPopular===null||mostPopular===void 0?void 0:mostPopular.id)===pkg.id;return/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:index*0.1,duration:0.4},className:\"relative h-full\",children:/*#__PURE__*/_jsxs(Card,{className:`h-full relative overflow-visible flex flex-col ${isPopular?'ring-2 ring-primary border-primary':'border-default-200'} hover:shadow-lg transition-shadow duration-300`,children:[isPopular&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-3 left-1/2 transform -translate-x-1/2 z-10\",children:/*#__PURE__*/_jsx(Chip,{color:\"primary\",size:\"sm\",startContent:/*#__PURE__*/_jsx(Zap,{className:\"w-3 h-3\"}),className:\"shadow-md font-medium\",children:\"\\u6700\\u53D7\\u6B22\\u8FCE\"})}),/*#__PURE__*/_jsxs(CardBody,{className:\"p-6 flex flex-col h-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-foreground mb-2 leading-tight\",children:pkg.package_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center gap-2\",children:[/*#__PURE__*/_jsx(Chip,{size:\"sm\",color:pkg.level.toLowerCase()==='plus'?'primary':'default',variant:\"flat\",children:pkg.level}),/*#__PURE__*/_jsx(Chip,{size:\"sm\",variant:\"bordered\",startContent:/*#__PURE__*/_jsx(Timer,{className:\"w-3 h-3\"}),children:getDurationText(pkg.duration)})]})]}),/*#__PURE__*/_jsx(Divider,{className:\"my-4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-baseline justify-center gap-1 mb-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-4xl font-bold text-primary\",children:[\"\\xA5\",pkg.price]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-default-400\",children:[\"/ \",getDurationText(pkg.duration)]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-default-400\",children:[\"\\u7EA6 \\xA5\",calculateDailyPrice(pkg.price,pkg.duration),\" / \\u5929\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 flex-grow\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-default-50 p-4 rounded-lg h-full flex items-center justify-center min-h-[80px]\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-default-600 leading-relaxed text-center\",children:pkg.remarks||'暂无详细描述'})})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-auto\",children:/*#__PURE__*/_jsx(Button,{fullWidth:true,size:\"lg\",color:isPopular?\"primary\":\"default\",variant:isPopular?\"solid\":\"bordered\",className:\"font-semibold\",isLoading:orderLoading&&(selectedPackage===null||selectedPackage===void 0?void 0:selectedPackage.id)===pkg.id,isDisabled:pkg.status!==1,onPress:()=>{setSelectedPackage(pkg);createOrder(pkg.id);},children:pkg.status===1?'立刻订阅':'暂不可用'})})]})]})},pkg.id);})},selectedCategory)}),!loading&&!error&&packages.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-16\",children:[/*#__PURE__*/_jsx(Package,{className:\"w-16 h-16 mx-auto mb-4 text-default-300\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-default-600 mb-2\",children:\"\\u6682\\u65E0\\u53EF\\u7528\\u5957\\u9910\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-default-400\",children:\"\\u8BF7\\u7A0D\\u540E\\u518D\\u8BD5\\u6216\\u8054\\u7CFB\\u5BA2\\u670D\"})]}),/*#__PURE__*/_jsx(Modal,{isOpen:paymentModal,onClose:closePaymentModal,size:\"lg\",hideCloseButton:paymentStatus==='success',classNames:{base:\"max-h-[90vh]\",body:\"py-6\"},children:/*#__PURE__*/_jsxs(ModalContent,{children:[/*#__PURE__*/_jsx(ModalHeader,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold\",children:\"\\u5B8C\\u6210\\u652F\\u4ED8\"}),selectedPackage&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-default-500 mt-1\",children:selectedPackage.package_name})]})}),/*#__PURE__*/_jsx(ModalBody,{children:orderInfo&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardBody,{className:\"p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-default-500\",children:\"\\u8BA2\\u5355\\u53F7\"}),/*#__PURE__*/_jsx(\"code\",{className:\"text-xs bg-default-100 px-2 py-1 rounded font-mono\",children:orderInfo.order_id})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-default-500\",children:\"\\u652F\\u4ED8\\u91D1\\u989D\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-2xl font-bold text-primary\",children:[\"\\xA5\",selectedPackage===null||selectedPackage===void 0?void 0:selectedPackage.price]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-default-500\",children:\"\\u5957\\u9910\\u65F6\\u957F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedPackage?getDurationText(selectedPackage.duration):''})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[paymentStatus==='pending'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-3\",children:[/*#__PURE__*/_jsx(QrCode,{className:\"w-6 h-6 text-primary\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-medium\",children:orderInfo.pay_type==='wxpay'?'请使用微信扫码支付':'请扫码支付'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-default-500 space-y-1\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u4E8C\\u7EF4\\u78015\\u5206\\u949F\\u5185\\u6709\\u6548\"}),qrCodeExpired&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger font-medium\",children:\"\\u4E8C\\u7EF4\\u7801\\u5DF2\\u8FC7\\u671F\\uFF0C\\u8BF7\\u91CD\\u65B0\\u521B\\u5EFA\\u8BA2\\u5355\"})]})]}),paymentStatus==='checking'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(Spinner,{size:\"lg\",color:\"primary\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-default-600\",children:\"\\u6B63\\u5728\\u786E\\u8BA4\\u652F\\u4ED8\\u7ED3\\u679C...\"})]}),paymentStatus==='success'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(motion.div,{initial:{scale:0},animate:{scale:1},transition:{type:\"spring\",duration:0.6},children:/*#__PURE__*/_jsx(CheckCircle,{className:\"w-20 h-20 mx-auto text-success\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-success mb-2\",children:\"\\u652F\\u4ED8\\u6210\\u529F\\uFF01\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-default-500\",children:\"\\u9875\\u9762\\u5373\\u5C06\\u5237\\u65B0\\uFF0C\\u8BF7\\u7A0D\\u7B49...\"})]})]}),paymentStatus==='failed'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-12 h-12 mx-auto text-danger\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-danger mb-2\",children:\"\\u652F\\u4ED8\\u5931\\u8D25\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-default-500 text-sm\",children:\"\\u8BF7\\u91CD\\u8BD5\\u6216\\u8054\\u7CFB\\u5BA2\\u670D\"})]})]})]}),orderInfo.qr_code&&paymentStatus==='pending'&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsxs(Card,{className:\"p-6 relative\",children:[/*#__PURE__*/_jsx(motion.img,{src:generateQRCode(orderInfo.qr_code),alt:\"\\u652F\\u4ED8\\u4E8C\\u7EF4\\u7801\",className:`w-48 h-48 transition-all duration-500 ${qrCodeExpired?'opacity-30 grayscale':''}`,initial:{opacity:0,scale:0.8},animate:{opacity:1,scale:1},transition:{delay:0.2}}),qrCodeExpired&&/*#__PURE__*/_jsx(motion.div,{className:\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 rounded-lg\",initial:{opacity:0},animate:{opacity:1},transition:{duration:0.3},children:/*#__PURE__*/_jsx(Chip,{color:\"danger\",variant:\"solid\",className:\"shadow-lg\",children:\"\\u5DF2\\u8FC7\\u671F\"})})]})})]})}),/*#__PURE__*/_jsx(ModalFooter,{children:paymentStatus!=='success'&&/*#__PURE__*/_jsx(Button,{color:\"danger\",variant:\"light\",onPress:closePaymentModal,children:\"\\u53D6\\u6D88\\u652F\\u4ED8\"})})]})})]});};","map":{"version":3,"names":["React","useState","useEffect","useMemo","Card","CardBody","Button","Chip","Spinner","Modal","ModalContent","ModalHeader","ModalBody","ModalFooter","Divider","Tab","Tabs","motion","AnimatePresence","Package","Star","Crown","AlertCircle","CheckCircle","QrCode","Zap","Calendar","Timer","packageUserApi","orderUserApi","QRCodeGenerator","jsx","_jsx","jsxs","_jsxs","SubscriptionTab","packages","setPackages","loading","setLoading","error","setError","selectedPackage","setSelectedPackage","orderInfo","setOrderInfo","orderLoading","setOrderLoading","paymentModal","setPaymentModal","paymentStatus","setPaymentStatus","checkInterval","setCheckInterval","selectedCategory","setSelectedCategory","qrCodeExpired","setQrCodeExpired","qrCodeTimer","setQrCodeTimer","subscriptionCategories","key","label","icon","className","description","categorizePackage","duration","groupedPackages","groups","weekly","monthly","quarterly","yearly","more","forEach","pkg","category","push","Object","keys","sort","a","b","priority","availableCategories","filter","length","calculateDailyPrice","price","dailyPrice","toFixed","fetchPackages","response","getPackages","code","sortedPackages","data","firstAvailableCategory","find","some","msg","err","Error","message","createOrder","packageId","startPaymentStatusCheck","order_id","startQrCodeTimer","alert","clearTimeout","timer","setTimeout","orderId","clearInterval","interval","setInterval","getPayStatus","window","location","reload","console","generateQRCode","text","qr","addData","make","createDataURL","getDurationText","closePaymentModal","getMostPopularPackage","categoryPackages","sortedByPrice","middleIndex","Math","floor","id","children","size","color","variant","onPress","selectedKey","onSelectionChange","classNames","base","tabList","cursor","tab","tabContent","map","title","mode","div","initial","opacity","y","animate","exit","transition","index","mostPopular","isPopular","delay","startContent","package_name","level","toLowerCase","remarks","fullWidth","isLoading","isDisabled","status","isOpen","onClose","hideCloseButton","body","pay_type","scale","type","qr_code","img","src","alt"],"sources":["/opt/dev/star_share/web/src/pages/user/tabs/SubscriptionTab.tsx"],"sourcesContent":["/**\n * 订阅套餐Tab页面\n * 显示用户当前订阅和可用套餐\n */\nimport React, { useState, useEffect, useMemo } from 'react';\nimport {\n  Card,\n  CardBody,\n  Button,\n  Chip,\n  Spinner,\n  Modal,\n  ModalContent,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Divider,\n  Tab,\n  Tabs\n} from '@heroui/react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Package, Star, Crown, AlertCircle, CheckCircle, QrCode, Zap, Calendar, Timer, LucideIcon } from 'lucide-react';\nimport { packageUserApi, orderUserApi } from '../../../services/userApi';\nimport QRCodeGenerator from 'qrcode-generator';\nimport './SubscriptionTab.module.css';\n\ninterface PackageInfo {\n  id: number;\n  package_name: string;\n  category: string;\n  price: number;\n  duration: number;\n  introduce: string;\n  level: string;\n  priority: number;\n  remarks: string;\n  status: number;\n}\n\ninterface OrderInfo {\n  success: boolean;\n  trade_no: string;\n  order_id: string;\n  payment_url: string | null;\n  qr_code: string;\n  channel: string;\n  pay_type: string;\n}\n\ntype SubscriptionType = 'weekly' | 'monthly' | 'quarterly' | 'yearly' | 'more';\n\ninterface SubscriptionCategory {\n  key: SubscriptionType;\n  label: string;\n  icon: React.ReactNode;\n  description: string;\n}\n\nexport const SubscriptionTab: React.FC = () => {\n  const [packages, setPackages] = useState<PackageInfo[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string>('');\n  const [selectedPackage, setSelectedPackage] = useState<PackageInfo | null>(null);\n  const [orderInfo, setOrderInfo] = useState<OrderInfo | null>(null);\n  const [orderLoading, setOrderLoading] = useState(false);\n  const [paymentModal, setPaymentModal] = useState(false);\n  const [paymentStatus, setPaymentStatus] = useState<'pending' | 'checking' | 'success' | 'failed'>('pending');\n  const [checkInterval, setCheckInterval] = useState<NodeJS.Timeout | null>(null);\n  const [selectedCategory, setSelectedCategory] = useState<SubscriptionType>('monthly');\n  const [qrCodeExpired, setQrCodeExpired] = useState(false);\n  const [qrCodeTimer, setQrCodeTimer] = useState<NodeJS.Timeout | null>(null);\n\n  // 套餐分类配置\n  const subscriptionCategories: SubscriptionCategory[] = [\n    {\n      key: 'weekly',\n      label: '周订阅',\n      icon: <Calendar className=\"w-6 h-6\" />,\n      description: '7天体验'\n    },\n    {\n      key: 'monthly',\n      label: '月订阅',\n      icon: <Package className=\"w-6 h-6\" />,\n      description: '30天经济'\n    },\n    {\n      key: 'quarterly',\n      label: '季订阅',\n      icon: <Star className=\"w-6 h-6\" />,\n      description: '90天优惠'\n    },\n    {\n      key: 'yearly',\n      label: '年订阅',\n      icon: <Crown className=\"w-6 h-6\" />,\n      description: '365天超值'\n    },\n    {\n      key: 'more',\n      label: '更多',\n      icon: <Timer className=\"w-6 h-6\" />,\n      description: '其他时长'\n    }\n  ];\n\n  // 根据时长分类套餐\n  const categorizePackage = (duration: number): SubscriptionType => {\n    if (duration === 7) return 'weekly';\n    if (duration >= 30 && duration <= 31) return 'monthly';\n    if (duration >= 90 && duration <= 93) return 'quarterly';\n    if (duration >= 364 && duration <= 366) return 'yearly';\n    return 'more';\n  };\n\n  // 分组套餐\n  const groupedPackages = useMemo(() => {\n    const groups: Record<SubscriptionType, PackageInfo[]> = {\n      weekly: [],\n      monthly: [],\n      quarterly: [],\n      yearly: [],\n      more: []\n    };\n\n    packages.forEach(pkg => {\n      const category = categorizePackage(pkg.duration);\n      groups[category].push(pkg);\n    });\n\n    Object.keys(groups).forEach(key => {\n      groups[key as SubscriptionType].sort((a, b) => a.priority - b.priority);\n    });\n\n    return groups;\n  }, [packages]);\n\n  // 可用的分类\n  const availableCategories = useMemo(() => {\n    return subscriptionCategories.filter(category =>\n      groupedPackages[category.key].length > 0\n    );\n  }, [groupedPackages]);\n\n  // 计算日均价格（保留2位小数）\n  const calculateDailyPrice = (price: number, duration: number): string => {\n    if (duration <= 0) return '0.00';\n    const dailyPrice = price / duration;\n    return dailyPrice.toFixed(2);\n  };\n\n  // 获取套餐列表\n  const fetchPackages = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const response = await packageUserApi.getPackages();\n\n      if (response.code === 20000) {\n        const sortedPackages = (response.data || []).sort((a, b) => a.priority - b.priority);\n        setPackages(sortedPackages);\n\n        const firstAvailableCategory = subscriptionCategories.find(category =>\n          sortedPackages.some(pkg => categorizePackage(pkg.duration) === category.key)\n        );\n        if (firstAvailableCategory) {\n          setSelectedCategory(firstAvailableCategory.key);\n        }\n      } else {\n        setError(response.msg || '获取套餐列表失败');\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : '网络错误');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 创建订单\n  const createOrder = async (packageId: number) => {\n    try {\n      setOrderLoading(true);\n      const response = await orderUserApi.createOrder(packageId);\n\n      if (response.code === 20000) {\n        setOrderInfo(response.data);\n        setPaymentModal(true);\n        setPaymentStatus('pending');\n        setQrCodeExpired(false);\n        startPaymentStatusCheck(response.data.order_id);\n        startQrCodeTimer();\n      } else {\n        alert(response.msg || '创建订单失败');\n      }\n    } catch (err) {\n      alert(err instanceof Error ? err.message : '网络错误');\n    } finally {\n      setOrderLoading(false);\n    }\n  };\n\n  // 开始二维码计时器\n  const startQrCodeTimer = () => {\n    if (qrCodeTimer) {\n      clearTimeout(qrCodeTimer);\n    }\n    const timer = setTimeout(() => {\n      setQrCodeExpired(true);\n    }, 5 * 60 * 1000);\n    setQrCodeTimer(timer);\n  };\n\n  // 开始检查支付状态\n  const startPaymentStatusCheck = (orderId: string) => {\n    if (checkInterval) {\n      clearInterval(checkInterval);\n    }\n\n    const interval = setInterval(async () => {\n      try {\n        const response = await orderUserApi.getPayStatus(orderId);\n\n        if (response.code === 20000) {\n          setPaymentStatus('success');\n          clearInterval(interval);\n          if (qrCodeTimer) {\n            clearTimeout(qrCodeTimer);\n          }\n          setTimeout(() => {\n            window.location.reload();\n          }, 2000);\n        } else if (response.code === 20001) {\n          // 继续检查\n        } else {\n          setPaymentStatus('failed');\n          clearInterval(interval);\n        }\n      } catch (err) {\n        console.error('检查支付状态失败:', err);\n      }\n    }, 1500);\n\n    setCheckInterval(interval);\n  };\n\n  // 生成二维码\n  const generateQRCode = (text: string): string => {\n    const qr = QRCodeGenerator(0, 'M');\n    qr.addData(text);\n    qr.make();\n    return qr.createDataURL(8, 4);\n  };\n\n  // 获取时长描述\n  const getDurationText = (duration: number) => {\n    if (duration === 7) return '1周';\n    if (duration >= 30 && duration <= 31) return '1个月';\n    if (duration >= 90 && duration <= 93) return '1季度';\n    if (duration >= 364 && duration <= 366) return '1年';\n    return `${duration}天`;\n  };\n\n  // 关闭支付弹窗\n  const closePaymentModal = () => {\n    if (checkInterval) {\n      clearInterval(checkInterval);\n      setCheckInterval(null);\n    }\n    if (qrCodeTimer) {\n      clearTimeout(qrCodeTimer);\n      setQrCodeTimer(null);\n    }\n    setPaymentModal(false);\n    setOrderInfo(null);\n    setPaymentStatus('pending');\n    setQrCodeExpired(false);\n  };\n\n  // 计算最受欢迎的套餐\n  const getMostPopularPackage = (categoryPackages: PackageInfo[]) => {\n    if (categoryPackages.length <= 1) return null;\n    const sortedByPrice = [...categoryPackages].sort((a, b) => a.price - b.price);\n    const middleIndex = Math.floor(sortedByPrice.length / 2);\n    return sortedByPrice[middleIndex];\n  };\n\n  useEffect(() => {\n    fetchPackages();\n\n    return () => {\n      if (checkInterval) {\n        clearInterval(checkInterval);\n      }\n      if (qrCodeTimer) {\n        clearTimeout(qrCodeTimer);\n      }\n    };\n  }, []);\n\n  return (\n    <div className=\"w-full\" id=\"subscription-tab-container\">\n      {/* 页面标题 */}\n      <div className=\"text-center mb-8\">\n        <h1 className=\"text-3xl font-bold text-foreground mb-2\">订阅套餐</h1>\n        <p className=\"text-default-500 max-w-md mx-auto\">选择适合您的订阅方案，享受优质服务</p>\n      </div>\n\n      {/* 加载状态 */}\n      {loading && (\n        <div className=\"flex flex-col items-center justify-center py-16\">\n          <Spinner size=\"lg\" color=\"primary\" />\n          <p className=\"text-default-500 mt-4\">正在加载套餐信息...</p>\n        </div>\n      )}\n\n      {/* 错误状态 */}\n      {error && (\n        <div className=\"max-w-md mx-auto\">\n          <Card>\n            <CardBody className=\"text-center p-8\">\n              <AlertCircle className=\"w-12 h-12 text-danger mx-auto mb-4\" />\n              <h3 className=\"text-lg font-semibold text-danger mb-2\">加载失败</h3>\n              <p className=\"text-default-600 text-sm mb-4\">{error}</p>\n              <Button color=\"danger\" variant=\"light\" onPress={fetchPackages}>\n                重新加载\n              </Button>\n            </CardBody>\n          </Card>\n        </div>\n      )}\n\n      {/* 分类标签页 */}\n      {!loading && !error && availableCategories.length > 0 && (\n        <div className=\"mb-8\">\n          <Tabs\n            selectedKey={selectedCategory}\n            onSelectionChange={(key) => setSelectedCategory(key as SubscriptionType)}\n            variant=\"underlined\"\n            color=\"primary\"\n            classNames={{\n              base: \"w-full\",\n              tabList: \"gap-6 w-full relative rounded-none p-0 border-b border-divider\",\n              cursor: \"w-full bg-primary\",\n              tab: \"max-w-fit px-3 h-16\",\n              tabContent: \"group-data-[selected=true]:text-primary\"\n            }}\n          >\n            {availableCategories.map((category) => (\n              <Tab\n                key={category.key}\n                title={\n                  <div className=\"flex items-center gap-3 py-1\">\n                    <div className=\"flex-shrink-0 text-primary\">{category.icon}</div>\n                    <div className=\"flex flex-col items-start\">\n                      <span className=\"font-medium text-base\">{category.label}</span>\n                      <div className=\"flex items-center gap-1.5\">\n                        <span className=\"text-xs text-default-500\">{category.description}</span>\n                        <Chip size=\"sm\" variant=\"flat\" color=\"primary\" className=\"h-5 text-xs px-1.5\">\n                          {groupedPackages[category.key].length}\n                        </Chip>\n                      </div>\n                    </div>\n                  </div>\n                }\n              />\n            ))}\n          </Tabs>\n        </div>\n      )}\n\n      {/* 套餐列表 */}\n      {!loading && !error && availableCategories.length > 0 && (\n        <AnimatePresence mode=\"wait\">\n          <motion.div\n            key={selectedCategory}\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            transition={{ duration: 0.3 }}\n            className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3 max-w-6xl mx-auto\"\n          >\n            {groupedPackages[selectedCategory].map((pkg, index) => {\n              const mostPopular = getMostPopularPackage(groupedPackages[selectedCategory]);\n              const isPopular = mostPopular?.id === pkg.id;\n\n              return (\n                <motion.div\n                  key={pkg.id}\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ delay: index * 0.1, duration: 0.4 }}\n                  className=\"relative h-full\"\n                >\n                  <Card\n                    className={`h-full relative overflow-visible flex flex-col ${isPopular ? 'ring-2 ring-primary border-primary' : 'border-default-200'\n                      } hover:shadow-lg transition-shadow duration-300`}\n                  >\n                    {/* 推荐标签 */}\n                    {isPopular && (\n                      <div className=\"absolute -top-3 left-1/2 transform -translate-x-1/2 z-10\">\n                        <Chip\n                          color=\"primary\"\n                          size=\"sm\"\n                          startContent={<Zap className=\"w-3 h-3\" />}\n                          className=\"shadow-md font-medium\"\n                        >\n                          最受欢迎\n                        </Chip>\n                      </div>\n                    )}\n\n                    <CardBody className=\"p-6 flex flex-col h-full\">\n                      {/* 套餐标题 */}\n                      <div className=\"text-center mb-4\">\n                        <h3 className=\"text-xl font-bold text-foreground mb-2 leading-tight\">\n                          {pkg.package_name}\n                        </h3>\n                        <div className=\"flex justify-center gap-2\">\n                          <Chip\n                            size=\"sm\"\n                            color={pkg.level.toLowerCase() === 'plus' ? 'primary' : 'default'}\n                            variant=\"flat\"\n                          >\n                            {pkg.level}\n                          </Chip>\n                          <Chip\n                            size=\"sm\"\n                            variant=\"bordered\"\n                            startContent={<Timer className=\"w-3 h-3\" />}\n                          >\n                            {getDurationText(pkg.duration)}\n                          </Chip>\n                        </div>\n                      </div>\n\n                      <Divider className=\"my-4\" />\n\n                      {/* 价格信息 */}\n                      <div className=\"text-center mb-6\">\n                        <div className=\"flex items-baseline justify-center gap-1 mb-2\">\n                          <span className=\"text-4xl font-bold text-primary\">¥{pkg.price}</span>\n                          <span className=\"text-default-400\">/ {getDurationText(pkg.duration)}</span>\n                        </div>\n                        <p className=\"text-sm text-default-400\">\n                          约 ¥{calculateDailyPrice(pkg.price, pkg.duration)} / 天\n                        </p>\n                      </div>\n\n                      {/* 套餐描述 */}\n                      <div className=\"mb-6 flex-grow\">\n                        <div className=\"bg-default-50 p-4 rounded-lg h-full flex items-center justify-center min-h-[80px]\">\n                          <p className=\"text-sm text-default-600 leading-relaxed text-center\">\n                            {pkg.remarks || '暂无详细描述'}\n                          </p>\n                        </div>\n                      </div>\n\n                      {/* 订阅按钮 */}\n                      <div className=\"mt-auto\">\n                        <Button\n                          fullWidth\n                          size=\"lg\"\n                          color={isPopular ? \"primary\" : \"default\"}\n                          variant={isPopular ? \"solid\" : \"bordered\"}\n                          className=\"font-semibold\"\n                          isLoading={orderLoading && selectedPackage?.id === pkg.id}\n                          isDisabled={pkg.status !== 1}\n                          onPress={() => {\n                            setSelectedPackage(pkg);\n                            createOrder(pkg.id);\n                          }}\n                        >\n                          {pkg.status === 1 ? '立刻订阅' : '暂不可用'}\n                        </Button>\n                      </div>\n                    </CardBody>\n                  </Card>\n                </motion.div>\n              );\n            })}\n          </motion.div>\n        </AnimatePresence>\n      )}\n\n      {/* 空状态 */}\n      {!loading && !error && packages.length === 0 && (\n        <div className=\"text-center py-16\">\n          <Package className=\"w-16 h-16 mx-auto mb-4 text-default-300\" />\n          <h3 className=\"text-xl font-semibold text-default-600 mb-2\">暂无可用套餐</h3>\n          <p className=\"text-default-400\">请稍后再试或联系客服</p>\n        </div>\n      )}\n\n      {/* 支付弹窗 */}\n      <Modal\n        isOpen={paymentModal}\n        onClose={closePaymentModal}\n        size=\"lg\"\n        hideCloseButton={paymentStatus === 'success'}\n        classNames={{\n          base: \"max-h-[90vh]\",\n          body: \"py-6\",\n        }}\n      >\n        <ModalContent>\n          <ModalHeader>\n            <div>\n              <h2 className=\"text-xl font-bold\">完成支付</h2>\n              {selectedPackage && (\n                <p className=\"text-sm text-default-500 mt-1\">{selectedPackage.package_name}</p>\n              )}\n            </div>\n          </ModalHeader>\n\n          <ModalBody>\n            {orderInfo && (\n              <div className=\"space-y-6\">\n                {/* 订单摘要 */}\n                <Card>\n                  <CardBody className=\"p-4\">\n                    <div className=\"space-y-3\">\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-default-500\">订单号</span>\n                        <code className=\"text-xs bg-default-100 px-2 py-1 rounded font-mono\">\n                          {orderInfo.order_id}\n                        </code>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-default-500\">支付金额</span>\n                        <span className=\"text-2xl font-bold text-primary\">¥{selectedPackage?.price}</span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-default-500\">套餐时长</span>\n                        <span className=\"font-medium\">\n                          {selectedPackage ? getDurationText(selectedPackage.duration) : ''}\n                        </span>\n                      </div>\n                    </div>\n                  </CardBody>\n                </Card>\n\n                {/* 支付状态 */}\n                <div className=\"text-center\">\n                  {paymentStatus === 'pending' && (\n                    <div className=\"space-y-4\">\n                      <div className=\"flex items-center justify-center gap-3\">\n                        <QrCode className=\"w-6 h-6 text-primary\" />\n                        <span className=\"text-lg font-medium\">\n                          {orderInfo.pay_type === 'wxpay' ? '请使用微信扫码支付' : '请扫码支付'}\n                        </span>\n                      </div>\n                      <div className=\"text-sm text-default-500 space-y-1\">\n                        <p>二维码5分钟内有效</p>\n                        {qrCodeExpired && (\n                          <p className=\"text-danger font-medium\">二维码已过期，请重新创建订单</p>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {paymentStatus === 'checking' && (\n                    <div className=\"space-y-4\">\n                      <Spinner size=\"lg\" color=\"primary\" />\n                      <p className=\"text-default-600\">正在确认支付结果...</p>\n                    </div>\n                  )}\n\n                  {paymentStatus === 'success' && (\n                    <div className=\"space-y-6\">\n                      <motion.div\n                        initial={{ scale: 0 }}\n                        animate={{ scale: 1 }}\n                        transition={{ type: \"spring\", duration: 0.6 }}\n                      >\n                        <CheckCircle className=\"w-20 h-20 mx-auto text-success\" />\n                      </motion.div>\n                      <div>\n                        <h3 className=\"text-2xl font-bold text-success mb-2\">支付成功！</h3>\n                        <p className=\"text-default-500\">页面即将刷新，请稍等...</p>\n                      </div>\n                    </div>\n                  )}\n\n                  {paymentStatus === 'failed' && (\n                    <div className=\"space-y-4\">\n                      <AlertCircle className=\"w-12 h-12 mx-auto text-danger\" />\n                      <div>\n                        <h3 className=\"text-lg font-semibold text-danger mb-2\">支付失败</h3>\n                        <p className=\"text-default-500 text-sm\">请重试或联系客服</p>\n                      </div>\n                    </div>\n                  )}\n                </div>\n\n                {/* 二维码 */}\n                {orderInfo.qr_code && paymentStatus === 'pending' && (\n                  <div className=\"flex justify-center\">\n                    <Card className=\"p-6 relative\">\n                      <motion.img\n                        src={generateQRCode(orderInfo.qr_code)}\n                        alt=\"支付二维码\"\n                        className={`w-48 h-48 transition-all duration-500 ${qrCodeExpired ? 'opacity-30 grayscale' : ''\n                          }`}\n                        initial={{ opacity: 0, scale: 0.8 }}\n                        animate={{ opacity: 1, scale: 1 }}\n                        transition={{ delay: 0.2 }}\n                      />\n                      {qrCodeExpired && (\n                        <motion.div\n                          className=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 rounded-lg\"\n                          initial={{ opacity: 0 }}\n                          animate={{ opacity: 1 }}\n                          transition={{ duration: 0.3 }}\n                        >\n                          <Chip color=\"danger\" variant=\"solid\" className=\"shadow-lg\">\n                            已过期\n                          </Chip>\n                        </motion.div>\n                      )}\n                    </Card>\n                  </div>\n                )}\n              </div>\n            )}\n          </ModalBody>\n\n          <ModalFooter>\n            {paymentStatus !== 'success' && (\n              <Button\n                color=\"danger\"\n                variant=\"light\"\n                onPress={closePaymentModal}\n              >\n                取消支付\n              </Button>\n            )}\n          </ModalFooter>\n        </ModalContent>\n      </Modal>\n    </div>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"/**\n * CookieÁÆ°ÁêÜÂ∑•ÂÖ∑ÂáΩÊï∞\n */// Ëé∑ÂèñÂΩìÂâçÂüüÂêç‰ø°ÊÅØ\nconst getCurrentDomain=()=>{const hostname=window.location.hostname;const parts=hostname.split('.');// Â¶ÇÊûúÊòØIPÂú∞ÂùÄÊàñlocalhostÔºåÁõ¥Êé•ËøîÂõûÂΩìÂâçÂüüÂêç\nif(hostname==='localhost'||/^\\d+\\.\\d+\\.\\d+\\.\\d+$/.test(hostname)){return{currentDomain:hostname,mainDomain:hostname};}// Ëé∑Âèñ‰∏ªÂüüÂêçÔºàÊúÄÂêé‰∏§‰∏™ÈÉ®ÂàÜÔºåÂ¶Ç yy.comÔºâ\nconst mainDomain=parts.length>=2?parts.slice(-2).join('.'):hostname;return{currentDomain:hostname,mainDomain:mainDomain};};// Âà†Èô§ÊåáÂÆöÂüüÂêç‰∏ãÁöÑÊâÄÊúâcookie\nconst clearCookiesForDomain=domain=>{const cookies=document.cookie.split(';');for(let cookie of cookies){const eqPos=cookie.indexOf('=');const name=eqPos>-1?cookie.substr(0,eqPos).trim():cookie.trim();if(name){// Â∞ùËØïÂ§öÁßçÂà†Èô§ÊñπÂºèÔºåÁ°Æ‰øùÂΩªÂ∫ïÊ∏ÖÈô§\nconst expireDate='Thu, 01 Jan 1970 00:00:00 GMT';// 1. Âà†Èô§ÂΩìÂâçÂüüÂêçÔºåÊ†πË∑ØÂæÑ\ndocument.cookie=`${name}=; expires=${expireDate}; path=/`;// 2. Âà†Èô§ÂΩìÂâçÂüüÂêçÔºåÂΩìÂâçË∑ØÂæÑ\ndocument.cookie=`${name}=; expires=${expireDate}; path=${window.location.pathname}`;// 3. Âà†Èô§ÊåáÂÆöÂüüÂêçÔºåÊ†πË∑ØÂæÑ\ndocument.cookie=`${name}=; expires=${expireDate}; path=/; domain=${domain}`;// 4. Âà†Èô§ÊåáÂÆöÂüüÂêçÂâçÁºÄÁÇπÔºåÊ†πË∑ØÂæÑ\ndocument.cookie=`${name}=; expires=${expireDate}; path=/; domain=.${domain}`;// 5. Âà†Èô§ÂΩìÂâçÂÆåÊï¥ÂüüÂêç\ndocument.cookie=`${name}=; expires=${expireDate}; path=/; domain=${window.location.hostname}`;// 6. Âà†Èô§ÂΩìÂâçÂÆåÊï¥ÂüüÂêçÂâçÁºÄÁÇπ\ndocument.cookie=`${name}=; expires=${expireDate}; path=/; domain=.${window.location.hostname}`;// 7. Â∞ùËØïÂà†Èô§ÊâÄÊúâÂèØËÉΩÁöÑË∑ØÂæÑÁªÑÂêà\nconst pathParts=window.location.pathname.split('/').filter(part=>part);let currentPath='';for(const part of pathParts){currentPath+=`/${part}`;document.cookie=`${name}=; expires=${expireDate}; path=${currentPath}`;document.cookie=`${name}=; expires=${expireDate}; path=${currentPath}; domain=${domain}`;document.cookie=`${name}=; expires=${expireDate}; path=${currentPath}; domain=.${domain}`;}}}};// ÂΩªÂ∫ïÊ∏ÖÈô§ÊâÄÊúâÁõ∏ÂÖ≥ÂüüÂêçÁöÑcookieÔºàË∂ÖÂº∫ÁâàÔºâ\nconst clearAllRelatedCookies=(currentDomain,mainDomain)=>{try{console.log('üç™ ÂΩìÂâçÊâÄÊúâcookies:',document.cookie);// Ëé∑ÂèñÂΩìÂâçÊâÄÊúâcookieÂêçÁß∞\nconst cookies=document.cookie.split(';');const cookieNames=cookies.map(cookie=>{const name=cookie.split('=')[0].trim();return name;}).filter(name=>name);console.log('üç™ ÂèëÁé∞ÁöÑcookieÂêçÁß∞:',cookieNames);// ÂØπÊØè‰∏™cookieËøõË°åÊö¥ÂäõÂà†Èô§ÔºåÂ∞ùËØïÊâÄÊúâÂèØËÉΩÁöÑÁªÑÂêà\ncookieNames.forEach(cookieName=>{if(cookieName){console.log(`üóëÔ∏è Ê≠£Âú®Âà†Èô§cookie: ${cookieName}`);// 1. Âü∫Á°ÄÂà†Èô§ÔºàÊó†domainÔºâ\ndocument.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`;// 2. Âà†Èô§‰∏ªÂüüÂêçÁöÑcookie\ndocument.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=niceaigc.com`;// 3. Âà†Èô§.‰∏ªÂüüÂêçÁöÑcookie (Ëøô‰∏™ÊòØÂÖ≥ÈîÆÔºÅ)\ndocument.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.niceaigc.com`;// 4. Âà†Èô§ÂΩìÂâçÂÆåÊï¥ÂüüÂêç\ndocument.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=${window.location.hostname}`;// 5. Âà†Èô§.ÂΩìÂâçÂÆåÊï¥ÂüüÂêç\ndocument.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.${window.location.hostname}`;// 6. Â∏¶secureÂ±ûÊÄßÁöÑÂà†Èô§\ndocument.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; secure`;document.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=niceaigc.com; secure`;document.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.niceaigc.com; secure`;// 7. ‰∏çÂêåË∑ØÂæÑÁöÑÂà†Èô§\nconst paths=['/','',window.location.pathname];paths.forEach(path=>{document.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=${path}`;document.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=${path}; domain=niceaigc.com`;document.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=${path}; domain=.niceaigc.com`;});}});// Á≠âÂæÖ‰∏Ä‰∏ãËÆ©Âà†Èô§Êìç‰ΩúÁîüÊïà\nconst start=Date.now();while(Date.now()-start<50){/* Á≠âÂæÖ50ms */}// È¢ùÂ§ñ‰øùÈô©ÔºöÂÜçÊ¨°Âà†Èô§Â∏∏ËßÅÁöÑËÆ§ËØÅcookie\nconst criticalCookies=['xuserid','xtoken','cas_access_token','access_token','refresh_token','user_session','auth_token','session_id','JSESSIONID','sessionid','authToken','userToken','loginToken'];criticalCookies.forEach(cookieName=>{// Â§öÁßçÂà†Èô§ÊñπÂºèÁ°Æ‰øùÊ∏ÖÈô§\ndocument.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`;document.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=niceaigc.com`;document.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.niceaigc.com`;document.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=${window.location.hostname}`;document.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.${window.location.hostname}`;});// ÂÜçÁ≠âÂæÖ‰∏Ä‰∏ã\nconst start2=Date.now();while(Date.now()-start2<50){/* Á≠âÂæÖ50ms */}console.log('üç™ Ê∏ÖÁêÜÂêéÂâ©‰Ωôcookies:',document.cookie);// Â¶ÇÊûúËøòÊúâcookieÔºåÂÜçËøõË°å‰∏ÄËΩÆÂº∫Âà∂Ê∏ÖÁêÜ\nif(document.cookie.trim()){console.log('‚ö†Ô∏è ÂèëÁé∞ÊÆãÁïôcookieÔºåËøõË°åÂº∫Âà∂Ê∏ÖÁêÜ');const remainingCookies=document.cookie.split(';');remainingCookies.forEach(cookie=>{const cookieName=cookie.split('=')[0].trim();if(cookieName){// Ë∂ÖÁ∫ßÊö¥ÂäõÂà†Èô§\ndocument.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`;document.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.niceaigc.com`;document.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=niceaigc.com`;document.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=; domain=.niceaigc.com`;document.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; domain=.niceaigc.com`;// Â∞ùËØïÁ©∫ÂÄºËÆæÁΩÆ\ndocument.cookie=`${cookieName}=; max-age=0; path=/; domain=.niceaigc.com`;document.cookie=`${cookieName}=; max-age=0; path=/; domain=niceaigc.com`;}});}console.log('üç™ ÊúÄÁªàÂâ©‰Ωôcookies:',document.cookie);}catch(error){console.error('‚ùå CookieÊ∏ÖÁêÜËøáÁ®ãÂá∫Èîô:',error);// Â∫îÊÄ•Ê∏ÖÁêÜ\ntry{const allCookies=document.cookie.split(';');allCookies.forEach(cookie=>{const cookieName=cookie.split('=')[0].trim();if(cookieName){document.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`;document.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.niceaigc.com`;}});}catch(basicError){console.error('‚ùå Â∫îÊÄ•Ê∏ÖÁêÜ‰πüÂ§±Ë¥•:',basicError);}}};// Ê£ÄÊµãÊòØÂê¶Âú®iframe‰∏≠\nconst isInIframe=()=>{try{return window.self!==window.top;}catch(e){return true;// Â¶ÇÊûúÊó†Ê≥ïËÆøÈóÆtopÔºåËØ¥ÊòéÂú®iframe‰∏≠\n}};// ÈÄöÁü•Áà∂È°µÈù¢Âà†Èô§cookie\nconst notifyParentToDeleteCookies=()=>{try{if(window.parent&&window.parent!==window){window.parent.postMessage({action:'deleteCookies',domain:'.niceaigc.com',cookies:document.cookie.split(';').map(c=>c.split('=')[0].trim()).filter(name=>name)},'*');console.log('üì§ Â∑≤ÈÄöÁü•Áà∂È°µÈù¢Âà†Èô§cookies');}}catch(e){console.warn('‚ö†Ô∏è Êó†Ê≥ïÈÄöÁü•Áà∂È°µÈù¢Âà†Èô§cookies:',e);}};// ÈÄÄÂá∫ÁôªÂΩïÂäüËÉΩÔºàÂº∫ÂåñÁâàÔºâ\nexport const logout=async()=>{console.log('üöÄ ÂºÄÂßãÊâßË°ålogoutÊµÅÁ®ã');// Ê£ÄÊµãiframeÁéØÂ¢É\nconst inIframe=isInIframe();console.log('üñºÔ∏è ÊòØÂê¶Âú®iframe‰∏≠:',inIframe);try{const{currentDomain,mainDomain}=getCurrentDomain();console.log('üìç ÂüüÂêç‰ø°ÊÅØ:',{currentDomain,mainDomain});// Âú®Ê∏ÖÈô§cookie‰πãÂâçÂÖàËé∑Âèñcas_access_token\nconst casAccessToken=getCookie('cas_access_token');console.log('üîë Ëé∑ÂèñÂà∞ÁöÑcas_access_token:',casAccessToken?'Â≠òÂú®':'‰∏çÂ≠òÂú®');try{// Âä®ÊÄÅÂØºÂÖ• postMessage Â∑•ÂÖ∑ÔºàÈÅøÂÖçÂæ™ÁéØ‰æùËµñÔºâ\nconsole.log('üìû ÂáÜÂ§áÂèëÈÄÅpostMessageÈÄöÁü•');const{notifyLogout}=await import('./postMessage');// ÂÖàÂèëÈÄÅÈÄÄÂá∫ÁôªÂΩïÈÄöÁü•Âà∞Áà∂È°µÈù¢ÔºåËá™Âä®Ëé∑ÂèñÂΩìÂâçÈ°µÈù¢Âú∞ÂùÄ\nnotifyLogout();console.log('‚úÖ postMessageÈÄöÁü•ÂèëÈÄÅÂÆåÊàê');// Á≠âÂæÖ‰∏ÄÂ∞èÊÆµÊó∂Èó¥Á°Æ‰øùÊ∂àÊÅØÂèëÈÄÅÂÆåÊàê\nawait new Promise(resolve=>setTimeout(resolve,100));}catch(postMessageError){console.warn('‚ö†Ô∏è postMessageÂèëÈÄÅÂ§±Ë¥•ÔºåÁªßÁª≠ÊâßË°åÊ∏ÖÁêÜ:',postMessageError);// ‰∏çËÆ©postMessageÈîôËØØ‰∏≠Êñ≠Êï¥‰∏™ÊµÅÁ®ã\n}// Ê∏ÖÈô§localStorageÂíåsessionStorage\nconsole.log('üóëÔ∏è ÂºÄÂßãÊ∏ÖÈô§Êú¨Âú∞Â≠òÂÇ®');try{localStorage.clear();sessionStorage.clear();console.log('‚úÖ Êú¨Âú∞Â≠òÂÇ®Ê∏ÖÈô§ÂÆåÊàê');}catch(storageError){console.error('‚ùå Êú¨Âú∞Â≠òÂÇ®Ê∏ÖÈô§Â§±Ë¥•:',storageError);}// Â¶ÇÊûúÂú®iframe‰∏≠ÔºåÂÖàÈÄöÁü•Áà∂È°µÈù¢Âà†Èô§cookie\nif(inIframe){console.log('üñºÔ∏è Ê£ÄÊµãÂà∞iframeÁéØÂ¢ÉÔºåÈÄöÁü•Áà∂È°µÈù¢Âà†Èô§cookies');notifyParentToDeleteCookies();// Á≠âÂæÖ‰∏Ä‰∏ãËÆ©Áà∂È°µÈù¢ÊúâÊó∂Èó¥Â§ÑÁêÜ\nawait new Promise(resolve=>setTimeout(resolve,200));}// ÂΩªÂ∫ïÊ∏ÖÈô§ÊâÄÊúâÁõ∏ÂÖ≥ÂüüÂêçÁöÑcookie\nconsole.log('üç™ ÂºÄÂßãÊ∏ÖÈô§cookies');try{console.log('üç™ Ê∏ÖÈô§ÂâçÁöÑcookies:',document.cookie);clearAllRelatedCookies(currentDomain,mainDomain);console.log('üç™ Ê∏ÖÈô§ÂêéÁöÑcookies:',document.cookie);console.log('‚úÖ CookieÊ∏ÖÈô§ÂÆåÊàê');}catch(cookieError){console.error('‚ùå CookieÊ∏ÖÈô§Â§±Ë¥•:',cookieError);}// Â¶ÇÊûúÂú®iframe‰∏≠‰∏î‰ªçÊúâcookieÊÆãÁïôÔºåÂÜçÊ¨°ÈÄöÁü•Áà∂È°µÈù¢\nif(inIframe&&document.cookie.trim()){console.log('üñºÔ∏è iframe‰∏≠‰ªçÊúâcookieÊÆãÁïôÔºåÂÜçÊ¨°ÈÄöÁü•Áà∂È°µÈù¢');notifyParentToDeleteCookies();await new Promise(resolve=>setTimeout(resolve,300));}// Á°ÆÂÆöÊúÄÁªàË∑≥ËΩ¨Âú∞ÂùÄ\nlet redirectUri;if(currentDomain!==mainDomain){// ÂΩìÂâçÊòØÂ≠êÂüüÂêçÔºåË∑≥ËΩ¨Âà∞‰∏ªÂüüÂêç\nredirectUri=`${window.location.protocol}//${mainDomain}`;}else{// ÂΩìÂâçÊòØ‰∏ªÂüüÂêçÔºåË∑≥ËΩ¨Âà∞Ê†πË∑ØÂæÑ\nredirectUri=`${window.location.protocol}//${currentDomain}/`;}console.log('üîó ÈáçÂÆöÂêëURI:',redirectUri);// ÊûÑÈÄ†Casdoor logout URL\nlet casdoorLogoutUrl=`https://casdoor.niceaigc.com/api/logout?post_logout_redirect_uri=${encodeURIComponent(redirectUri)}`;// Â¶ÇÊûúÊúâcas_access_tokenÔºåÊ∑ªÂä†id_token_hintÂèÇÊï∞\nif(casAccessToken){casdoorLogoutUrl+=`&id_token_hint=${encodeURIComponent(casAccessToken)}`;}console.log('üéØ ÊúÄÁªàË∑≥ËΩ¨URL:',casdoorLogoutUrl);// Â¶ÇÊûúÂú®iframe‰∏≠ÔºåÈúÄË¶ÅÁâπÊÆäÂ§ÑÁêÜË∑≥ËΩ¨\nif(inIframe){console.log('üñºÔ∏è iframeÁéØÂ¢ÉÔºåÈÄöÁü•Áà∂È°µÈù¢Ë∑≥ËΩ¨');try{// ÈÄöÁü•Áà∂È°µÈù¢ËøõË°åË∑≥ËΩ¨\nwindow.parent.postMessage({action:'logout_redirect',url:casdoorLogoutUrl},'*');// ‰πüÂ∞ùËØïÁõ¥Êé•Ë∑≥ËΩ¨Ôºà‰Ωú‰∏∫Â§áÁî®Ôºâ\nsetTimeout(()=>{window.location.href=casdoorLogoutUrl;},500);}catch(e){console.warn('‚ö†Ô∏è Êó†Ê≥ïÈÄöÁü•Áà∂È°µÈù¢Ë∑≥ËΩ¨ÔºåÁõ¥Êé•Ë∑≥ËΩ¨');window.location.href=casdoorLogoutUrl;}}else{// Âº∫Âà∂Á≠âÂæÖ‰∏Ä‰∏ãÔºåÁ°Æ‰øùÊâÄÊúâÊìç‰ΩúÂÆåÊàê\nawait new Promise(resolve=>setTimeout(resolve,200));console.log('üöÄ ÂáÜÂ§áË∑≥ËΩ¨Âà∞Casdoor');// Ë∑≥ËΩ¨Âà∞Casdoor logoutÊé•Âè£\nwindow.location.href=casdoorLogoutUrl;}}catch(error){console.error('‚ùå logoutÂáΩÊï∞ÊâßË°åÂ§±Ë¥•:',error);// Â¶ÇÊûúÂÖ®ÊµÅÁ®ãÂ§±Ë¥•ÔºåËá≥Â∞ëÊâßË°åÂü∫Á°ÄÊ∏ÖÁêÜ\nconsole.log('üõ°Ô∏è ÊâßË°åÂ∫îÊÄ•Ê∏ÖÁêÜ');try{localStorage.clear();sessionStorage.clear();// Âü∫Á°ÄcookieÊ∏ÖÁêÜ\nconst cookies=document.cookie.split(';');cookies.forEach(cookie=>{const cookieName=cookie.split('=')[0].trim();if(cookieName){document.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`;document.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.niceaigc.com`;}});console.log('üõ°Ô∏è Â∫îÊÄ•Ê∏ÖÁêÜÂÆåÊàêÔºåÂº∫Âà∂Ë∑≥ËΩ¨Âà∞‰∏ªÈ°µ');// Â∫îÊÄ•Ë∑≥ËΩ¨\nif(inIframe){window.parent.postMessage({action:'logout_redirect',url:'https://niceaigc.com/'},'*');}window.location.href='https://niceaigc.com/';}catch(emergencyError){console.error('‚ùå Â∫îÊÄ•Ê∏ÖÁêÜ‰πüÂ§±Ë¥•‰∫Ü:',emergencyError);// ÊúÄÂêéÁöÑÊâãÊÆµ\nalert('ÈÄÄÂá∫ÁôªÂΩïÊó∂ÂèëÁîüÈîôËØØÔºåËØ∑ÊâãÂä®Ê∏ÖÈô§ÊµèËßàÂô®ÁºìÂ≠òÊàñÂà∑Êñ∞È°µÈù¢');}}};// Ëé∑ÂèñcookieÂÄº\nexport const getCookie=name=>{const value=`; ${document.cookie}`;const parts=value.split(`; ${name}=`);if(parts.length===2){var _parts$pop;return((_parts$pop=parts.pop())===null||_parts$pop===void 0?void 0:_parts$pop.split(';').shift())||null;}return null;};// Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁôªÂΩï\nexport const isAuthenticated=()=>{const xuserid=getCookie('xuserid');const xtoken=getCookie('xtoken');return!!(xuserid&&xtoken);};","map":{"version":3,"names":["getCurrentDomain","hostname","window","location","parts","split","test","currentDomain","mainDomain","length","slice","join","clearCookiesForDomain","domain","cookies","document","cookie","eqPos","indexOf","name","substr","trim","expireDate","pathname","pathParts","filter","part","currentPath","clearAllRelatedCookies","console","log","cookieNames","map","forEach","cookieName","paths","path","start","Date","now","criticalCookies","start2","remainingCookies","error","allCookies","basicError","isInIframe","self","top","e","notifyParentToDeleteCookies","parent","postMessage","action","c","warn","logout","inIframe","casAccessToken","getCookie","notifyLogout","Promise","resolve","setTimeout","postMessageError","localStorage","clear","sessionStorage","storageError","cookieError","redirectUri","protocol","casdoorLogoutUrl","encodeURIComponent","url","href","emergencyError","alert","value","_parts$pop","pop","shift","isAuthenticated","xuserid","xtoken"],"sources":["/opt/dev/star_share/web/src/utils/cookieUtils.ts"],"sourcesContent":["/**\n * CookieÁÆ°ÁêÜÂ∑•ÂÖ∑ÂáΩÊï∞\n */\n\n// Ëé∑ÂèñÂΩìÂâçÂüüÂêç‰ø°ÊÅØ\nconst getCurrentDomain = (): { currentDomain: string; mainDomain: string } => {\n  const hostname = window.location.hostname;\n  const parts = hostname.split('.');\n\n  // Â¶ÇÊûúÊòØIPÂú∞ÂùÄÊàñlocalhostÔºåÁõ¥Êé•ËøîÂõûÂΩìÂâçÂüüÂêç\n  if (hostname === 'localhost' || /^\\d+\\.\\d+\\.\\d+\\.\\d+$/.test(hostname)) {\n    return {\n      currentDomain: hostname,\n      mainDomain: hostname\n    };\n  }\n\n  // Ëé∑Âèñ‰∏ªÂüüÂêçÔºàÊúÄÂêé‰∏§‰∏™ÈÉ®ÂàÜÔºåÂ¶Ç yy.comÔºâ\n  const mainDomain = parts.length >= 2 ? parts.slice(-2).join('.') : hostname;\n\n  return {\n    currentDomain: hostname,\n    mainDomain: mainDomain\n  };\n};\n\n// Âà†Èô§ÊåáÂÆöÂüüÂêç‰∏ãÁöÑÊâÄÊúâcookie\nconst clearCookiesForDomain = (domain: string): void => {\n  const cookies = document.cookie.split(';');\n\n  for (let cookie of cookies) {\n    const eqPos = cookie.indexOf('=');\n    const name = eqPos > -1 ? cookie.substr(0, eqPos).trim() : cookie.trim();\n\n    if (name) {\n      // Â∞ùËØïÂ§öÁßçÂà†Èô§ÊñπÂºèÔºåÁ°Æ‰øùÂΩªÂ∫ïÊ∏ÖÈô§\n      const expireDate = 'Thu, 01 Jan 1970 00:00:00 GMT';\n\n      // 1. Âà†Èô§ÂΩìÂâçÂüüÂêçÔºåÊ†πË∑ØÂæÑ\n      document.cookie = `${name}=; expires=${expireDate}; path=/`;\n\n      // 2. Âà†Èô§ÂΩìÂâçÂüüÂêçÔºåÂΩìÂâçË∑ØÂæÑ\n      document.cookie = `${name}=; expires=${expireDate}; path=${window.location.pathname}`;\n\n      // 3. Âà†Èô§ÊåáÂÆöÂüüÂêçÔºåÊ†πË∑ØÂæÑ\n      document.cookie = `${name}=; expires=${expireDate}; path=/; domain=${domain}`;\n\n      // 4. Âà†Èô§ÊåáÂÆöÂüüÂêçÂâçÁºÄÁÇπÔºåÊ†πË∑ØÂæÑ\n      document.cookie = `${name}=; expires=${expireDate}; path=/; domain=.${domain}`;\n\n      // 5. Âà†Èô§ÂΩìÂâçÂÆåÊï¥ÂüüÂêç\n      document.cookie = `${name}=; expires=${expireDate}; path=/; domain=${window.location.hostname}`;\n\n      // 6. Âà†Èô§ÂΩìÂâçÂÆåÊï¥ÂüüÂêçÂâçÁºÄÁÇπ\n      document.cookie = `${name}=; expires=${expireDate}; path=/; domain=.${window.location.hostname}`;\n\n      // 7. Â∞ùËØïÂà†Èô§ÊâÄÊúâÂèØËÉΩÁöÑË∑ØÂæÑÁªÑÂêà\n      const pathParts = window.location.pathname.split('/').filter(part => part);\n      let currentPath = '';\n      for (const part of pathParts) {\n        currentPath += `/${part}`;\n        document.cookie = `${name}=; expires=${expireDate}; path=${currentPath}`;\n        document.cookie = `${name}=; expires=${expireDate}; path=${currentPath}; domain=${domain}`;\n        document.cookie = `${name}=; expires=${expireDate}; path=${currentPath}; domain=.${domain}`;\n      }\n    }\n  }\n};\n\n// ÂΩªÂ∫ïÊ∏ÖÈô§ÊâÄÊúâÁõ∏ÂÖ≥ÂüüÂêçÁöÑcookieÔºàË∂ÖÂº∫ÁâàÔºâ\nconst clearAllRelatedCookies = (currentDomain: string, mainDomain: string): void => {\n  try {\n    console.log('üç™ ÂΩìÂâçÊâÄÊúâcookies:', document.cookie);\n\n    // Ëé∑ÂèñÂΩìÂâçÊâÄÊúâcookieÂêçÁß∞\n    const cookies = document.cookie.split(';');\n    const cookieNames = cookies.map(cookie => {\n      const name = cookie.split('=')[0].trim();\n      return name;\n    }).filter(name => name);\n\n    console.log('üç™ ÂèëÁé∞ÁöÑcookieÂêçÁß∞:', cookieNames);\n\n    // ÂØπÊØè‰∏™cookieËøõË°åÊö¥ÂäõÂà†Èô§ÔºåÂ∞ùËØïÊâÄÊúâÂèØËÉΩÁöÑÁªÑÂêà\n    cookieNames.forEach(cookieName => {\n      if (cookieName) {\n        console.log(`üóëÔ∏è Ê≠£Âú®Âà†Èô§cookie: ${cookieName}`);\n\n        // 1. Âü∫Á°ÄÂà†Èô§ÔºàÊó†domainÔºâ\n        document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`;\n\n        // 2. Âà†Èô§‰∏ªÂüüÂêçÁöÑcookie\n        document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=niceaigc.com`;\n\n        // 3. Âà†Èô§.‰∏ªÂüüÂêçÁöÑcookie (Ëøô‰∏™ÊòØÂÖ≥ÈîÆÔºÅ)\n        document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.niceaigc.com`;\n\n        // 4. Âà†Èô§ÂΩìÂâçÂÆåÊï¥ÂüüÂêç\n        document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=${window.location.hostname}`;\n\n        // 5. Âà†Èô§.ÂΩìÂâçÂÆåÊï¥ÂüüÂêç\n        document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.${window.location.hostname}`;\n\n        // 6. Â∏¶secureÂ±ûÊÄßÁöÑÂà†Èô§\n        document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; secure`;\n        document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=niceaigc.com; secure`;\n        document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.niceaigc.com; secure`;\n\n        // 7. ‰∏çÂêåË∑ØÂæÑÁöÑÂà†Èô§\n        const paths = ['/', '', window.location.pathname];\n        paths.forEach(path => {\n          document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=${path}`;\n          document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=${path}; domain=niceaigc.com`;\n          document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=${path}; domain=.niceaigc.com`;\n        });\n      }\n    });\n\n    // Á≠âÂæÖ‰∏Ä‰∏ãËÆ©Âà†Èô§Êìç‰ΩúÁîüÊïà\n    const start = Date.now();\n    while (Date.now() - start < 50) { /* Á≠âÂæÖ50ms */ }\n\n    // È¢ùÂ§ñ‰øùÈô©ÔºöÂÜçÊ¨°Âà†Èô§Â∏∏ËßÅÁöÑËÆ§ËØÅcookie\n    const criticalCookies = [\n      'xuserid', 'xtoken', 'cas_access_token', 'access_token', 'refresh_token',\n      'user_session', 'auth_token', 'session_id', 'JSESSIONID', 'sessionid',\n      'authToken', 'userToken', 'loginToken'\n    ];\n\n    criticalCookies.forEach(cookieName => {\n      // Â§öÁßçÂà†Èô§ÊñπÂºèÁ°Æ‰øùÊ∏ÖÈô§\n      document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`;\n      document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=niceaigc.com`;\n      document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.niceaigc.com`;\n      document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=${window.location.hostname}`;\n      document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.${window.location.hostname}`;\n    });\n\n    // ÂÜçÁ≠âÂæÖ‰∏Ä‰∏ã\n    const start2 = Date.now();\n    while (Date.now() - start2 < 50) { /* Á≠âÂæÖ50ms */ }\n\n    console.log('üç™ Ê∏ÖÁêÜÂêéÂâ©‰Ωôcookies:', document.cookie);\n\n    // Â¶ÇÊûúËøòÊúâcookieÔºåÂÜçËøõË°å‰∏ÄËΩÆÂº∫Âà∂Ê∏ÖÁêÜ\n    if (document.cookie.trim()) {\n      console.log('‚ö†Ô∏è ÂèëÁé∞ÊÆãÁïôcookieÔºåËøõË°åÂº∫Âà∂Ê∏ÖÁêÜ');\n      const remainingCookies = document.cookie.split(';');\n      remainingCookies.forEach(cookie => {\n        const cookieName = cookie.split('=')[0].trim();\n        if (cookieName) {\n          // Ë∂ÖÁ∫ßÊö¥ÂäõÂà†Èô§\n          document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`;\n          document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.niceaigc.com`;\n          document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=niceaigc.com`;\n          document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=; domain=.niceaigc.com`;\n          document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; domain=.niceaigc.com`;\n\n          // Â∞ùËØïÁ©∫ÂÄºËÆæÁΩÆ\n          document.cookie = `${cookieName}=; max-age=0; path=/; domain=.niceaigc.com`;\n          document.cookie = `${cookieName}=; max-age=0; path=/; domain=niceaigc.com`;\n        }\n      });\n    }\n\n    console.log('üç™ ÊúÄÁªàÂâ©‰Ωôcookies:', document.cookie);\n\n  } catch (error) {\n    console.error('‚ùå CookieÊ∏ÖÁêÜËøáÁ®ãÂá∫Èîô:', error);\n    // Â∫îÊÄ•Ê∏ÖÁêÜ\n    try {\n      const allCookies = document.cookie.split(';');\n      allCookies.forEach(cookie => {\n        const cookieName = cookie.split('=')[0].trim();\n        if (cookieName) {\n          document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`;\n          document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.niceaigc.com`;\n        }\n      });\n    } catch (basicError) {\n      console.error('‚ùå Â∫îÊÄ•Ê∏ÖÁêÜ‰πüÂ§±Ë¥•:', basicError);\n    }\n  }\n};\n\n// Ê£ÄÊµãÊòØÂê¶Âú®iframe‰∏≠\nconst isInIframe = (): boolean => {\n  try {\n    return window.self !== window.top;\n  } catch (e) {\n    return true; // Â¶ÇÊûúÊó†Ê≥ïËÆøÈóÆtopÔºåËØ¥ÊòéÂú®iframe‰∏≠\n  }\n};\n\n// ÈÄöÁü•Áà∂È°µÈù¢Âà†Èô§cookie\nconst notifyParentToDeleteCookies = (): void => {\n  try {\n    if (window.parent && window.parent !== window) {\n      window.parent.postMessage({\n        action: 'deleteCookies',\n        domain: '.niceaigc.com',\n        cookies: document.cookie.split(';').map(c => c.split('=')[0].trim()).filter(name => name)\n      }, '*');\n      console.log('üì§ Â∑≤ÈÄöÁü•Áà∂È°µÈù¢Âà†Èô§cookies');\n    }\n  } catch (e) {\n    console.warn('‚ö†Ô∏è Êó†Ê≥ïÈÄöÁü•Áà∂È°µÈù¢Âà†Èô§cookies:', e);\n  }\n};\n\n// ÈÄÄÂá∫ÁôªÂΩïÂäüËÉΩÔºàÂº∫ÂåñÁâàÔºâ\nexport const logout = async (): Promise<void> => {\n  console.log('üöÄ ÂºÄÂßãÊâßË°ålogoutÊµÅÁ®ã');\n\n  // Ê£ÄÊµãiframeÁéØÂ¢É\n  const inIframe = isInIframe();\n  console.log('üñºÔ∏è ÊòØÂê¶Âú®iframe‰∏≠:', inIframe);\n\n  try {\n    const { currentDomain, mainDomain } = getCurrentDomain();\n    console.log('üìç ÂüüÂêç‰ø°ÊÅØ:', { currentDomain, mainDomain });\n\n    // Âú®Ê∏ÖÈô§cookie‰πãÂâçÂÖàËé∑Âèñcas_access_token\n    const casAccessToken = getCookie('cas_access_token');\n    console.log('üîë Ëé∑ÂèñÂà∞ÁöÑcas_access_token:', casAccessToken ? 'Â≠òÂú®' : '‰∏çÂ≠òÂú®');\n\n    try {\n      // Âä®ÊÄÅÂØºÂÖ• postMessage Â∑•ÂÖ∑ÔºàÈÅøÂÖçÂæ™ÁéØ‰æùËµñÔºâ\n      console.log('üìû ÂáÜÂ§áÂèëÈÄÅpostMessageÈÄöÁü•');\n      const { notifyLogout } = await import('./postMessage');\n\n      // ÂÖàÂèëÈÄÅÈÄÄÂá∫ÁôªÂΩïÈÄöÁü•Âà∞Áà∂È°µÈù¢ÔºåËá™Âä®Ëé∑ÂèñÂΩìÂâçÈ°µÈù¢Âú∞ÂùÄ\n      notifyLogout();\n      console.log('‚úÖ postMessageÈÄöÁü•ÂèëÈÄÅÂÆåÊàê');\n\n      // Á≠âÂæÖ‰∏ÄÂ∞èÊÆµÊó∂Èó¥Á°Æ‰øùÊ∂àÊÅØÂèëÈÄÅÂÆåÊàê\n      await new Promise(resolve => setTimeout(resolve, 100));\n    } catch (postMessageError) {\n      console.warn('‚ö†Ô∏è postMessageÂèëÈÄÅÂ§±Ë¥•ÔºåÁªßÁª≠ÊâßË°åÊ∏ÖÁêÜ:', postMessageError);\n      // ‰∏çËÆ©postMessageÈîôËØØ‰∏≠Êñ≠Êï¥‰∏™ÊµÅÁ®ã\n    }\n\n    // Ê∏ÖÈô§localStorageÂíåsessionStorage\n    console.log('üóëÔ∏è ÂºÄÂßãÊ∏ÖÈô§Êú¨Âú∞Â≠òÂÇ®');\n    try {\n      localStorage.clear();\n      sessionStorage.clear();\n      console.log('‚úÖ Êú¨Âú∞Â≠òÂÇ®Ê∏ÖÈô§ÂÆåÊàê');\n    } catch (storageError) {\n      console.error('‚ùå Êú¨Âú∞Â≠òÂÇ®Ê∏ÖÈô§Â§±Ë¥•:', storageError);\n    }\n\n    // Â¶ÇÊûúÂú®iframe‰∏≠ÔºåÂÖàÈÄöÁü•Áà∂È°µÈù¢Âà†Èô§cookie\n    if (inIframe) {\n      console.log('üñºÔ∏è Ê£ÄÊµãÂà∞iframeÁéØÂ¢ÉÔºåÈÄöÁü•Áà∂È°µÈù¢Âà†Èô§cookies');\n      notifyParentToDeleteCookies();\n      // Á≠âÂæÖ‰∏Ä‰∏ãËÆ©Áà∂È°µÈù¢ÊúâÊó∂Èó¥Â§ÑÁêÜ\n      await new Promise(resolve => setTimeout(resolve, 200));\n    }\n\n    // ÂΩªÂ∫ïÊ∏ÖÈô§ÊâÄÊúâÁõ∏ÂÖ≥ÂüüÂêçÁöÑcookie\n    console.log('üç™ ÂºÄÂßãÊ∏ÖÈô§cookies');\n    try {\n      console.log('üç™ Ê∏ÖÈô§ÂâçÁöÑcookies:', document.cookie);\n      clearAllRelatedCookies(currentDomain, mainDomain);\n      console.log('üç™ Ê∏ÖÈô§ÂêéÁöÑcookies:', document.cookie);\n      console.log('‚úÖ CookieÊ∏ÖÈô§ÂÆåÊàê');\n    } catch (cookieError) {\n      console.error('‚ùå CookieÊ∏ÖÈô§Â§±Ë¥•:', cookieError);\n    }\n\n    // Â¶ÇÊûúÂú®iframe‰∏≠‰∏î‰ªçÊúâcookieÊÆãÁïôÔºåÂÜçÊ¨°ÈÄöÁü•Áà∂È°µÈù¢\n    if (inIframe && document.cookie.trim()) {\n      console.log('üñºÔ∏è iframe‰∏≠‰ªçÊúâcookieÊÆãÁïôÔºåÂÜçÊ¨°ÈÄöÁü•Áà∂È°µÈù¢');\n      notifyParentToDeleteCookies();\n      await new Promise(resolve => setTimeout(resolve, 300));\n    }\n\n    // Á°ÆÂÆöÊúÄÁªàË∑≥ËΩ¨Âú∞ÂùÄ\n    let redirectUri: string;\n    if (currentDomain !== mainDomain) {\n      // ÂΩìÂâçÊòØÂ≠êÂüüÂêçÔºåË∑≥ËΩ¨Âà∞‰∏ªÂüüÂêç\n      redirectUri = `${window.location.protocol}//${mainDomain}`;\n    } else {\n      // ÂΩìÂâçÊòØ‰∏ªÂüüÂêçÔºåË∑≥ËΩ¨Âà∞Ê†πË∑ØÂæÑ\n      redirectUri = `${window.location.protocol}//${currentDomain}/`;\n    }\n    console.log('üîó ÈáçÂÆöÂêëURI:', redirectUri);\n\n    // ÊûÑÈÄ†Casdoor logout URL\n    let casdoorLogoutUrl = `https://casdoor.niceaigc.com/api/logout?post_logout_redirect_uri=${encodeURIComponent(redirectUri)}`;\n\n    // Â¶ÇÊûúÊúâcas_access_tokenÔºåÊ∑ªÂä†id_token_hintÂèÇÊï∞\n    if (casAccessToken) {\n      casdoorLogoutUrl += `&id_token_hint=${encodeURIComponent(casAccessToken)}`;\n    }\n\n    console.log('üéØ ÊúÄÁªàË∑≥ËΩ¨URL:', casdoorLogoutUrl);\n\n    // Â¶ÇÊûúÂú®iframe‰∏≠ÔºåÈúÄË¶ÅÁâπÊÆäÂ§ÑÁêÜË∑≥ËΩ¨\n    if (inIframe) {\n      console.log('üñºÔ∏è iframeÁéØÂ¢ÉÔºåÈÄöÁü•Áà∂È°µÈù¢Ë∑≥ËΩ¨');\n      try {\n        // ÈÄöÁü•Áà∂È°µÈù¢ËøõË°åË∑≥ËΩ¨\n        window.parent.postMessage({\n          action: 'logout_redirect',\n          url: casdoorLogoutUrl\n        }, '*');\n\n        // ‰πüÂ∞ùËØïÁõ¥Êé•Ë∑≥ËΩ¨Ôºà‰Ωú‰∏∫Â§áÁî®Ôºâ\n        setTimeout(() => {\n          window.location.href = casdoorLogoutUrl;\n        }, 500);\n      } catch (e) {\n        console.warn('‚ö†Ô∏è Êó†Ê≥ïÈÄöÁü•Áà∂È°µÈù¢Ë∑≥ËΩ¨ÔºåÁõ¥Êé•Ë∑≥ËΩ¨');\n        window.location.href = casdoorLogoutUrl;\n      }\n    } else {\n      // Âº∫Âà∂Á≠âÂæÖ‰∏Ä‰∏ãÔºåÁ°Æ‰øùÊâÄÊúâÊìç‰ΩúÂÆåÊàê\n      await new Promise(resolve => setTimeout(resolve, 200));\n      console.log('üöÄ ÂáÜÂ§áË∑≥ËΩ¨Âà∞Casdoor');\n      // Ë∑≥ËΩ¨Âà∞Casdoor logoutÊé•Âè£\n      window.location.href = casdoorLogoutUrl;\n    }\n\n  } catch (error) {\n    console.error('‚ùå logoutÂáΩÊï∞ÊâßË°åÂ§±Ë¥•:', error);\n\n    // Â¶ÇÊûúÂÖ®ÊµÅÁ®ãÂ§±Ë¥•ÔºåËá≥Â∞ëÊâßË°åÂü∫Á°ÄÊ∏ÖÁêÜ\n    console.log('üõ°Ô∏è ÊâßË°åÂ∫îÊÄ•Ê∏ÖÁêÜ');\n    try {\n      localStorage.clear();\n      sessionStorage.clear();\n\n      // Âü∫Á°ÄcookieÊ∏ÖÁêÜ\n      const cookies = document.cookie.split(';');\n      cookies.forEach(cookie => {\n        const cookieName = cookie.split('=')[0].trim();\n        if (cookieName) {\n          document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`;\n          document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.niceaigc.com`;\n        }\n      });\n\n      console.log('üõ°Ô∏è Â∫îÊÄ•Ê∏ÖÁêÜÂÆåÊàêÔºåÂº∫Âà∂Ë∑≥ËΩ¨Âà∞‰∏ªÈ°µ');\n      // Â∫îÊÄ•Ë∑≥ËΩ¨\n      if (inIframe) {\n        window.parent.postMessage({ action: 'logout_redirect', url: 'https://niceaigc.com/' }, '*');\n      }\n      window.location.href = 'https://niceaigc.com/';\n    } catch (emergencyError) {\n      console.error('‚ùå Â∫îÊÄ•Ê∏ÖÁêÜ‰πüÂ§±Ë¥•‰∫Ü:', emergencyError);\n      // ÊúÄÂêéÁöÑÊâãÊÆµ\n      alert('ÈÄÄÂá∫ÁôªÂΩïÊó∂ÂèëÁîüÈîôËØØÔºåËØ∑ÊâãÂä®Ê∏ÖÈô§ÊµèËßàÂô®ÁºìÂ≠òÊàñÂà∑Êñ∞È°µÈù¢');\n    }\n  }\n};\n\n// Ëé∑ÂèñcookieÂÄº\nexport const getCookie = (name: string): string | null => {\n  const value = `; ${document.cookie}`;\n  const parts = value.split(`; ${name}=`);\n  if (parts.length === 2) {\n    return parts.pop()?.split(';').shift() || null;\n  }\n  return null;\n};\n\n// Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁôªÂΩï\nexport const isAuthenticated = (): boolean => {\n  const xuserid = getCookie('xuserid');\n  const xtoken = getCookie('xtoken');\n  return !!(xuserid && xtoken);\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}